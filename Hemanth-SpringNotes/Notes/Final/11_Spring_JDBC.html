<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Spring JDBC Notes</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 20px;
        background-color: #f1f1f1;
        line-height: 1.6;
        transition: background-color 0.3s, color 0.3s;
      }
      .white-bg {
        background-color: #ffffff;
        color: #333;
      }
      .grey-bg {
        background-color: #e0e0e0;
        color: #333;
      }
      .black-bg {
        background-color: #1a1a1a;
        color: #ffffff;
      }
      .bg-switcher {
        position: fixed;
        top: 10px;
        right: 10px;
        z-index: 1000;
        font-size: 16px;
      }
      .bg-switcher label {
        margin-right: 10px;
        color: inherit;
      }
      .bg-switcher select {
        padding: 5px;
        border-radius: 5px;
        background-color: #04aa6d;
        color: white;
        border: none;
        cursor: pointer;
      }
      .bg-switcher select:focus {
        outline: 2px solid #059862;
      }
      .sidebar {
        width: 250px;
        background-color: #04aa6d;
        position: fixed;
        top: 0;
        left: 0;
        height: 100%;
        padding-top: 20px;
        color: white;
        overflow-y: auto;
      }
      .sidebar-title {
        font-size: 24px;
        text-align: center;
        margin-bottom: 30px;
      }
      .sidebar-link {
        display: block;
        padding: 12px 20px;
        color: white;
        text-decoration: none;
        font-size: 18px;
        transition: background-color 0.3s;
      }
      .sidebar-link:hover {
        background-color: #059862;
      }
      .sidebar-link:focus {
        outline: 2px solid white;
      }
      .main-content {
        margin-left: 270px;
        padding: 30px;
      }
      .header {
        background-color: #282a35;
        color: white;
        padding: 20px;
        text-align: center;
        border-radius: 8px;
        margin-bottom: 20px;
      }
      .header-title {
        font-size: 36px;
        margin: 0;
      }
      .header-subtitle {
        font-size: 18px;
        margin-top: 10px;
      }
      .section {
        margin: 20px 0;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }
      .white-bg .section {
        background-color: #f9f9f9;
      }
      .grey-bg .section {
        background-color: #d0d0d0;
      }
      .black-bg .section {
        background-color: #2a2a2a;
      }
      .section-title {
        font-size: 28px;
        color: #04aa6d;
        margin-bottom: 15px;
      }
      .subsection-title {
        font-size: 22px;
        margin: 15px 0 10px;
        color: inherit;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 20px;
        background-color: #ffffff;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        overflow-x: auto;
      }
      th,
      td {
        padding: 12px 15px;
        text-align: left;
        border-bottom: 1px solid #ddd;
      }
      th {
        background-color: #04aa6d;
        color: white;
        font-weight: bold;
      }
      tr:nth-child(even) {
        background-color: #f9f9f9;
      }
      tr:hover {
        background-color: #f1f1f1;
      }
      .content-line {
        font-size: 16px;
        margin: 8px 0;
        padding: 10px;
        border-left: 4px solid #04aa6d;
      }
      .white-bg .content-line {
        background-color: #f0f0f0;
      }
      .grey-bg .content-line {
        background-color: #c0c0c0;
      }
      .black-bg .content-line {
        background-color: #333333;
      }

      .code-block {
        padding: 15px;
        border-radius: 5px;
        font-family: "Courier New", Courier, monospace;
        font-size: 18px; /* Previously increased from 16px */
        overflow-x: auto;
        margin: 10px 0;
      }
      .white-bg .code-block {
        background-color: #282a35;
        color: white;
      }
      .grey-bg .code-block {
        background-color: #3a3a3a;
        color: white;
      }
      .black-bg .code-block {
        background-color: #282a35; /* Kept black to match white-bg */
        color: white; /* Kept white to match white-bg */
      }
      .code-block::-webkit-scrollbar {
        height: 8px;
      }
      .code-block::-webkit-scrollbar-thumb {
        background-color: #04aa6d;
        border-radius: 4px;
      }
      .code-block::-webkit-scrollbar-track {
        background-color: #f1f1f1;
      }
      /* Java syntax highlighting for code blocks */
      .code-block .java-keyword {
        color: #569cd6;
        font-weight: bold;
      }
      .code-block .java-type {
        color: #4ec9b0;
      }
      .code-block .java-string {
        color: #d69d85;
      }
      .code-block .java-comment {
        color: #6a9955;
        font-style: italic;
      }
      .code-block .java-annotation {
        color: #b5cea8;
      }
      .code-block .java-number {
        color: #b5cea8;
      }
      .code-block .java-method {
        color: #dcdcaa;
      }
      .code-block .java-interface {
        color: #b8d7a3;
        font-style: italic;
      }
      .code-block .java-parameter {
        color: #9cdcfe;
      }
      .code-block .java-operator {
        color: #d4d4d4;
      }
      .code-block .java-classname {
        color: #4ec9b0;
        font-weight: bold;
      }
      .code-block .java-package {
        color: #c586c0;
      }
      .code-block .java-import {
        color: #c586c0;
      }
      .code-block .java-brace {
        color: #d4d4d4;
      }
      .code-block .java-field {
        color: #9cdcfe;
      }
      .code-block .java-static {
        color: #b5cea8;
        font-style: italic;
      }
      .code-block .java-public {
        color: #569cd6;
      }
      .code-block .java-private {
        color: #569cd6;
      }
      .code-block .java-protected {
        color: #569cd6;
      }
      .code-block .java-final {
        color: #b5cea8;
      }
      .code-block .java-void {
        color: #4ec9b0;
      }
      .code-block .java-boolean {
        color: #4ec9b0;
      }
      .code-block .java-null {
        color: #b5cea8;
      }
      .code-block .java-true,
      .code-block .java-false {
        color: #b5cea8;
      }

      .image-container {
        margin: 20px 0;
        text-align: center;
      }
      .diagram {
        max-width: 100%;
        border: 1px solid #ddd;
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      }
      .image-caption {
        font-size: 14px;
        color: inherit;
        margin-top: 5px;
      }
      .highlight {
        color: #ff4500;
        font-weight: bold;
      }
      strong {
        font-weight: bold;
      }
      @media (max-width: 768px) {
        .sidebar {
          width: 100%;
          height: auto;
          position: relative;
        }
        .main-content {
          margin-left: 0;
        }
      }
    </style>
    <script>
      function changeBackground() {
        const select = document.getElementById("bg-select");
        const body = document.body;
        body.classList.remove("white-bg", "grey-bg", "black-bg");
        body.classList.add(select.value);
      }
    </script>
  </head>
  <body class="white-bg">
    <div class="sidebar">
      <div class="sidebar-title">Spring JDBC Notes</div>
      <a href="#introduction" class="sidebar-link"
        >1. Introduction to Spring JDBC</a
      >
      <a href="#project-creation" class="sidebar-link"
        >2. Creating a Spring JDBC Project</a
      >
      <a href="#layers" class="sidebar-link"
        >3. Student Service and Repository Layers</a
      >
      <a href="#jdbc-template" class="sidebar-link">4. JDBC Template</a>
      <a href="#schema-data" class="sidebar-link">5. Schema and Data Files</a>
      <a href="#rowmapper" class="sidebar-link">6. RowMapper</a>
      <a href="#postgresql" class="sidebar-link"
        >7. Using PostgreSQL with Spring JDBC</a
      >
      <a href="#databases" class="sidebar-link">8. Databases Used</a>
      <a href="#takeaways" class="sidebar-link">9. Key Takeaways</a>
      <a href="#additional-notes" class="sidebar-link">10. Additional Notes</a>
    </div>

    <div class="bg-switcher">
      <label for="bg-select">Background:</label>
      <select id="bg-select" onchange="changeBackground()">
        <option value="white-bg">White</option>
        <option value="grey-bg">Grey</option>
        <option value="black-bg">Black</option>
      </select>
    </div>

    <div class="main-content">
      <div class="header">
        <h1 class="header-title">Spring JDBC Notes</h1>
        <p class="header-subtitle">
          Comprehensive guide to using Spring JDBC with H2 and PostgreSQL
        </p>
      </div>

      <div class="section" id="introduction">
        <h2 class="section-title">1. Introduction to Spring JDBC</h2>
        <h3 class="subsection-title">Explanation</h3>
        <div class="content-line">
          Spring JDBC is a module in the Spring Framework that simplifies
          database interactions by abstracting the complexities of traditional
          JDBC (Java Database Connectivity).
        </div>
        <div class="content-line">
          Traditional JDBC requires developers to manually handle multiple
          steps, such as opening and closing connections, creating statements,
          loading drivers, and managing exceptions, which increases development
          time and introduces potential errors.
        </div>
        <div class="content-line">
          Spring JDBC addresses these issues by providing a higher-level
          abstraction, reducing boilerplate code and simplifying database
          operations.
        </div>
        <h3 class="subsection-title">Key Points</h3>
        <ul>
          <li>
            <div class="content-line">
              <strong>Purpose:</strong> Simplifies database connectivity and
              operations for Java applications.
            </div>
          </li>
          <li>
            <div class="content-line">
              <strong>Why Use Spring JDBC?</strong>
            </div>
            <ul>
              <li>
                <div class="content-line">
                  Reduces repetitive code compared to traditional JDBC.
                </div>
              </li>
              <li>
                <div class="content-line">
                  Manages connection lifecycle (opening/closing connections).
                </div>
              </li>
              <li>
                <div class="content-line">Simplifies exception handling.</div>
              </li>
              <li>
                <div class="content-line">
                  Provides reusable components like
                  <span class="keyword-highlight">JdbcTemplate</span> for
                  executing queries.
                </div>
              </li>
            </ul>
          </li>
          <li>
            <div class="content-line">
              <strong>Use Case:</strong> Essential for applications that rely on
              databases to store and retrieve data, regardless of the data
              volume.
            </div>
          </li>
          <li>
            <div class="content-line"><strong>Components:</strong></div>
            <ul>
              <li>
                <div class="content-line">
                  <span class="keyword-highlight">JdbcTemplate:</span> Core
                  component for executing SQL queries and processing results.
                </div>
              </li>
              <li>
                <div class="content-line">
                  <span class="keyword-highlight">DataSource:</span> Manages
                  database connections, enabling connection pooling to reuse
                  existing connections instead of creating new ones for each
                  request.
                </div>
              </li>
            </ul>
          </li>
        </ul>
        <h3 class="subsection-title">Example Context</h3>
        <div class="content-line">
          Applications often need to store data persistently, and databases are
          the standard choice.
        </div>
        <div class="content-line">
          Spring JDBC integrates seamlessly with Spring Boot, leveraging
          dependency injection to manage database-related beans.
        </div>
      </div>

      <div class="section" id="project-creation">
        <h2 class="section-title">2. Creating a Spring JDBC Project</h2>
        <h3 class="subsection-title">Explanation</h3>
        <div class="content-line">
          To use Spring JDBC, you create a Spring Boot project with the
          necessary dependencies for Spring JDBC and a database driver.
        </div>
        <div class="content-line">
          The example uses Spring Initializr to generate a Maven-based project
          with Java, specifying dependencies for Spring JDBC and the H2
          database.
        </div>
        <h3 class="subsection-title">Key Steps</h3>
        <div class="content-line">
          <strong>Spring Initializr Setup:</strong>
        </div>
        <ul>
          <li><div class="content-line">Project Type: Maven</div></li>
          <li><div class="content-line">Language: Java</div></li>
          <li>
            <div class="content-line">
              Spring Boot Version: 3.2.x (or latest)
            </div>
          </li>
          <li><div class="content-line">Group ID: com.telusko</div></li>
          <li>
            <div class="content-line">Artifact ID: SpringJDBCExample</div>
          </li>
          <li><div class="content-line">Packaging: JAR</div></li>
          <li><div class="content-line">Java Version: 17 or 21</div></li>
          <li>
            <div class="content-line"><strong>Dependencies:</strong></div>
            <ul>
              <li>
                <div class="content-line">
                  Spring Boot Starter JDBC: Provides Spring JDBC support.
                </div>
              </li>
              <li>
                <div class="content-line">
                  H2 Database: An in-memory database with a lightweight
                  footprint (~2MB).
                </div>
              </li>
            </ul>
          </li>
        </ul>
        <div class="content-line"><strong>Project Generation:</strong></div>
        <ul>
          <li>
            <div class="content-line">
              Generate the project, download, and unzip it.
            </div>
          </li>
          <li>
            <div class="content-line">Open in an IDE like IntelliJ IDEA.</div>
          </li>
        </ul>
        <div class="content-line"><strong>Verify Dependencies:</strong></div>
        <ul>
          <li>
            <div class="content-line">
              Check pom.xml for added dependencies.
            </div>
          </li>
        </ul>
        <div class="content-line"><strong>Run the Application:</strong></div>
        <ul>
          <li>
            <div class="content-line">
              Ensure the application runs without errors to verify setup.
            </div>
          </li>
        </ul>
        <h3 class="subsection-title">Code Reference</h3>
        <div class="code-heading">pom.xml</div>
        <pre
          class="code-block"
        ><code>&lt;!-- pom.xml: Defines project dependencies and configuration --&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;3.2.0&lt;/version&gt;
        &lt;relativePath/&gt;
    &lt;/parent&gt;
    &lt;groupId&gt;com.telusko&lt;/groupId&gt;
    &lt;artifactId&gt;SpringJDBCExample&lt;/artifactId&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
    &lt;name&gt;SpringJDBCExample&lt;/name&gt;
    &lt;description&gt;Demo project for Spring Boot and JDBC&lt;/description&gt;
    &lt;properties&gt;
        &lt;java.version&gt;17&lt;/java.version&gt;
    &lt;/properties&gt;
    &lt;dependencies&gt;
        &lt;!-- Spring Boot Starter JDBC: Provides Spring JDBC support, including JdbcTemplate --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;!-- H2 Database: In-memory database for development and testing --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.h2database&lt;/groupId&gt;
            &lt;artifactId&gt;h2&lt;/artifactId&gt;
            &lt;scope&gt;runtime&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;!-- Spring Boot Starter Test: For testing the application --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;!-- Spring Boot Maven Plugin: Packages the application as an executable JAR --&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;</code></pre>
        <div class="code-heading">SpringJdbcExampleApplication.java</div>
        <pre class="code-block">
<span class="java-comment">// SpringJdbcExampleApplication.java: Main application class</span>
<span class="java-package">package</span> <span class="java-classname">com.telusko</span>;

<span class="java-import">import</span> <span class="java-classname">org.springframework.boot.SpringApplication</span>;
<span class="java-import">import</span> <span class="java-classname">org.springframework.boot.autoconfigure.SpringBootApplication</span>;

<span class="java-comment">// @SpringBootApplication: Enables auto-configuration, component scanning, and configuration</span>
<span class="java-annotation">@SpringBootApplication</span>
<span class="java-keyword">public</span> <span class="java-classname">class</span> <span class="java-classname">SpringJdbcExampleApplication</span> {
    <span class="java-comment">// Main method: Entry point, starts the Spring Boot application</span>
    <span class="java-keyword">public</span> <span class="java-keyword">static</span> <span class="java-keyword">void</span> <span class="java-method">main</span>(<span class="java-classname">String</span>[] <span class="java-parameter">args</span>) {
        <span class="java-classname">SpringApplication</span>.<span class="java-method">run</span>(<span class="java-classname">SpringJdbcExampleApplication</span>.<span class="java-classname">class</span>, <span class="java-parameter">args</span>);
    }
}
            </pre>
        <h3 class="subsection-title">H2 Database</h3>
        <div class="content-line">
          <strong>Type:</strong> In-memory database (data is lost when the
          application stops).
        </div>
        <div class="content-line">
          <strong>Advantages:</strong> Lightweight, no external setup required,
          includes JDBC driver.
        </div>
        <div class="content-line">
          <strong>Default Configuration:</strong> Spring Boot auto-configures H2
          with a default database and connection pooling (via HikariCP).
        </div>
      </div>

      <div class="section" id="layers">
        <h2 class="section-title">3. Student Service and Repository Layers</h2>
        <h3 class="subsection-title">Explanation</h3>
        <div class="content-line">
          A layered architecture is used to organize the application:
        </div>
        <ul>
          <li>
            <div class="content-line">
              Model Layer: Represents the data (e.g., Student class).
            </div>
          </li>
          <li>
            <div class="content-line">
              Service Layer: Contains business logic and interacts with the
              repository.
            </div>
          </li>
          <li>
            <div class="content-line">
              Repository Layer: Handles database operations using JdbcTemplate.
            </div>
          </li>
        </ul>
        <div class="content-line">
          The example builds a student management application to add and
          retrieve student records.
        </div>
        <h3 class="subsection-title">Key Components</h3>
        <h4 class="subsection-title">3.1. Student Model</h4>
        <div class="content-line">
          <strong>Purpose:</strong> Represents a student entity with fields
          corresponding to database table columns.
        </div>
        <div class="content-line"><strong>Fields:</strong></div>
        <ul>
          <li>
            <div class="content-line">
              rollNo (int): Unique identifier (primary key).
            </div>
          </li>
          <li><div class="content-line">name (String): Student name.</div></li>
          <li><div class="content-line">marks (int): Student marks.</div></li>
        </ul>
        <div class="content-line"><strong>Annotations:</strong></div>
        <ul>
          <li>
            <div class="content-line">
              @Component: Marks the class as a Spring-managed bean.
            </div>
          </li>
          <li>
            <div class="content-line">
              @Scope("prototype"): Ensures a new instance is created for each
              request.
            </div>
          </li>
        </ul>
        <div class="code-heading">Student.java</div>
        <pre class="code-block">
<span class="java-comment">// Student.java: Model class representing a student entity</span>
<span class="java-package">package</span> <span class="java-classname">com.telusko.model</span>;

<span class="java-import">import</span> <span class="java-classname">org.springframework.context.annotation.Scope</span>;
<span class="java-import">import</span> <span class="java-classname">org.springframework.stereotype.Component</span>;

<span class="java-comment">// @Component: Registers the class as a Spring-managed bean</span>
<span class="java-comment">// @Scope("prototype"): Creates a new instance for each request, suitable for stateful objects</span>
<span class="java-annotation">@Component</span>
<span class="java-annotation">@Scope("prototype")</span>
<span class="java-keyword">public</span> <span class="java-classname">class</span> <span class="java-classname">Student</span> {
    <span class="java-comment">// Fields corresponding to database columns</span>
    <span class="java-keyword">private</span> <span class="java-classname">int</span> <span class="java-field">rollNo</span>;    <span class="java-comment">// Unique identifier (primary key)</span>
    <span class="java-keyword">private</span> <span class="java-classname">String</span> <span class="java-field">name</span>;   <span class="java-comment">// Student name</span>
    <span class="java-keyword">private</span> <span class="java-classname">int</span> <span class="java-field">marks</span>;     <span class="java-comment">// Student marks</span>

    <span class="java-comment">// Getters and Setters</span>
    <span class="java-keyword">public</span> <span class="java-classname">int</span> <span class="java-method">getRollNo</span>() {
        <span class="java-keyword">return</span> <span class="java-field">rollNo</span>;
    }

    <span class="java-keyword">public</span> <span class="java-keyword">void</span> <span class="java-method">setRollNo</span>(<span class="java-classname">int</span> <span class="java-parameter">rollNo</span>) {
        <span class="java-keyword">this</span>.<span class="java-field">rollNo</span> = <span class="java-parameter">rollNo</span>;
    }

    <span class="java-keyword">public</span> <span class="java-classname">String</span> <span class="java-method">getName</span>() {
        <span class="java-keyword">return</span> <span class="java-field">name</span>;
    }

    <span class="java-keyword">public</span> <span class="java-keyword">void</span> <span class="java-method">setName</span>(<span class="java-classname">String</span> <span class="java-parameter">name</span>) {
        <span class="java-keyword">this</span>.<span class="java-field">name</span> = <span class="java-parameter">name</span>;
    }

    <span class="java-keyword">public</span> <span class="java-classname">int</span> <span class="java-method">getMarks</span>() {
        <span class="java-keyword">return</span> <span class="java-field">marks</span>;
    }

    <span class="java-keyword">public</span> <span class="java-keyword">void</span> <span class="java-method">setMarks</span>(<span class="java-classname">int</span> <span class="java-parameter">marks</span>) {
        <span class="java-keyword">this</span>.<span class="java-field">marks</span> = <span class="java-parameter">marks</span>;
    }

    <span class="java-comment">// toString: Provides a string representation of the object for logging/debugging</span>
    <span class="java-annotation">@Override</span>
    <span class="java-keyword">public</span> <span class="java-classname">String</span> <span class="java-method">toString</span>() {
        <span class="java-keyword">return</span> <span class="java-string">"Student{"</span> +
                <span class="java-string">"rollNo="</span> + <span class="java-field">rollNo</span> +
                <span class="java-string">", name='"</span> + <span class="java-field">name</span> + <span class="java-string">"\'"</span> +
                <span class="java-string">", marks="</span> + <span class="java-field">marks</span> +
                <span class="java-string">"'"</span>;
    }
}
            </pre>
        <h4 class="subsection-title">3.2. Student Service</h4>
        <div class="content-line">
          <strong>Purpose:</strong> Acts as an intermediary between the client
          and the repository, handling business logic.
        </div>
        <div class="content-line"><strong>Methods:</strong></div>
        <ul>
          <li>
            <div class="content-line">
              addStudent(Student s): Calls the repository to save a student.
            </div>
          </li>
          <li>
            <div class="content-line">
              getStudents(): Retrieves all students from the repository.
            </div>
          </li>
        </ul>
        <div class="content-line"><strong>Annotations:</strong></div>
        <ul>
          <li>
            <div class="content-line">
              @Service: Marks the class as a service-layer bean.
            </div>
          </li>
          <li>
            <div class="content-line">
              @Autowired: Injects the StudentRepo dependency.
            </div>
          </li>
        </ul>
        <div class="code-heading">StudentService.java</div>
        <pre class="code-block">
<span class="java-comment">// StudentService.java: Service layer for business logic</span>
<span class="java-package">package</span> <span class="java-classname">com.telusko.service</span>;

<span class="java-import">import</span> <span class="java-classname">com.telusko.model.Student</span>;
<span class="java-import">import</span> <span class="java-classname">com.telusko.repo.StudentRepo</span>;
<span class="java-import">import</span> <span class="java-classname">org.springframework.beans.factory.annotation.Autowired</span>;
<span class="java-import">import</span> <span class="java-classname">org.springframework.stereotype.Service</span>;

<span class="java-import">import</span> <span class="java-classname">java.util.List</span>;

<span class="java-comment">// @Service: Marks the class as a service-layer bean, scanned by Spring</span>
<span class="java-annotation">@Service</span>
<span class="java-keyword">public</span> <span class="java-classname">class</span> <span class="java-classname">StudentService</span> {
    <span class="java-comment">// @Autowired: Injects the StudentRepo dependency</span>
    <span class="java-annotation">@Autowired</span>
    <span class="java-keyword">private</span> <span class="java-classname">StudentRepo</span> <span class="java-field">repo</span>;

    <span class="java-comment">// addStudent: Delegates to the repository to save a student</span>
    <span class="java-keyword">public</span> <span class="java-keyword">void</span> <span class="java-method">addStudent</span>(<span class="java-classname">Student</span> <span class="java-parameter">s</span>) {
        <span class="java-field">repo</span>.<span class="java-method">save</span>(<span class="java-parameter">s</span>);
    }

    <span class="java-comment">// getStudents: Retrieves all students from the repository</span>
    <span class="java-keyword">public</span> <span class="java-classname">List</span><<span class="java-classname">Student</span>> <span class="java-method">getStudents</span>() {
        <span class="java-keyword">return</span> <span class="java-field">repo</span>.<span class="java-method">findAll</span>();
    }
}
            </pre>
        <h4 class="subsection-title">3.3. Student Repository</h4>
        <div class="content-line">
          <strong>Purpose:</strong> Interacts with the database using
          JdbcTemplate to perform CRUD operations.
        </div>
        <div class="content-line"><strong>Methods:</strong></div>
        <ul>
          <li>
            <div class="content-line">
              save(Student s): Inserts a student record.
            </div>
          </li>
          <li>
            <div class="content-line">
              findAll(): Retrieves all student records.
            </div>
          </li>
        </ul>
        <div class="content-line"><strong>Annotations:</strong></div>
        <ul>
          <li>
            <div class="content-line">
              @Repository: Marks the class as a repository-layer bean.
            </div>
          </li>
          <li>
            <div class="content-line">
              @Autowired: Injects the JdbcTemplate dependency.
            </div>
          </li>
        </ul>
        <div class="code-heading">StudentRepo.java</div>
        <pre class="code-block">
<span class="java-comment">// StudentRepo.java: Repository layer for database operations</span>
<span class="java-package">package</span> <span class="java-classname">com.telusko.repo</span>;

<span class="java-import">import</span> <span class="java-classname">com.telusko.model.Student</span>;
<span class="java-import">import</span> <span class="java-classname">org.springframework.beans.factory.annotation.Autowired</span>;
<span class="java-import">import</span> <span class="java-classname">org.springframework.jdbc.core.JdbcTemplate</span>;
<span class="java-import">import</span> <span class="java-classname">org.springframework.stereotype.Repository</span>;

<span class="java-import">import</span> <span class="java-classname">java.util.ArrayList</span>;
<span class="java-import">import</span> <span class="java-classname">java.util.List</span>;

<span class="java-comment">// @Repository: Marks the class as a repository-layer bean, scanned by Spring</span>
<span class="java-annotation">@Repository</span>
<span class="java-keyword">public</span> <span class="java-classname">class</span> <span class="java-classname">StudentRepo</span> {
    <span class="java-comment">// JdbcTemplate: Spring JDBC component for executing SQL queries</span>
    <span class="java-keyword">private</span> <span class="java-classname">JdbcTemplate</span> <span class="java-field">jdbc</span>;

    <span class="java-comment">// @Autowired: Injects JdbcTemplate, configured by Spring using DataSource</span>
    <span class="java-annotation">@Autowired</span>
    <span class="java-keyword">public</span> <span class="java-keyword">void</span> <span class="java-method">setJdbc</span>(<span class="java-classname">JdbcTemplate</span> <span class="java-parameter">jdbc</span>) {
        <span class="java-keyword">this</span>.<span class="java-field">jdbc</span> = <span class="java-parameter">jdbc</span>;
    }

    <span class="java-comment">// save: Inserts a student record into the database</span>
    <span class="java-keyword">public</span> <span class="java-keyword">void</span> <span class="java-method">save</span>(<span class="java-classname">Student</span> <span class="java-parameter">s</span>) {
        <span class="java-comment">// SQL query with placeholders (?) for prepared statement</span>
        <span class="java-classname">String</span> <span class="java-field">sql</span> = <span class="java-string">"insert into student (rollno, name, marks) values (?, ?, ?)"</span>;
        <span class="java-comment">// Execute the query, passing student properties in the correct order</span>
        <span class="java-classname">int</span> <span class="java-field">rows</span> = <span class="java-field">jdbc</span>.<span class="java-method">update</span>(<span class="java-field">sql</span>, <span class="java-parameter">s</span>.<span class="java-method">getRollNo</span>(), <span class="java-parameter">s</span>.<span class="java-method">getName</span>(), <span class="java-parameter">s</span>.<span class="java-method">getMarks</span>());
        <span class="java-comment">// Log the number of rows affected</span>
        <span class="java-classname">System</span>.<span class="java-field">out</span>.<span class="java-method">println</span>(<span class="java-field">rows</span> + <span class="java-string">" affected"</span>);
    }

    <span class="java-comment">// findAll: Retrieves all student records from the database</span>
    <span class="java-keyword">public</span> <span class="java-classname">List</span><<span class="java-classname">Student</span>> <span class="java-method">findAll</span>() {
        <span class="java-comment">// Placeholder for initial testing, to be replaced with actual query</span>
        <span class="java-classname">List</span><<span class="java-classname">Student</span>> <span class="java-field">students</span> = <span class="java-keyword">new</span> <span class="java-classname">ArrayList</span><>();
        <span class="java-keyword">return</span> <span class="java-field">students</span>;
    }
}
            </pre>
        <h4 class="subsection-title">3.4. Main Class (Client)</h4>
        <div class="content-line">
          <strong>Purpose:</strong> Acts as the entry point, creating a student
          object and invoking service methods.
        </div>
        <div class="content-line"><strong>Key Steps:</strong></div>
        <ul>
          <li>
            <div class="content-line">
              Use ApplicationContext to retrieve Spring-managed beans.
            </div>
          </li>
          <li>
            <div class="content-line">
              Create a student, set its properties, and call addStudent.
            </div>
          </li>
          <li>
            <div class="content-line">
              Retrieve and print all students using getStudents.
            </div>
          </li>
        </ul>
        <div class="code-heading">SpringJdbcExampleApplication.java</div>
        <pre class="code-block">
<span class="java-comment">// SpringJdbcExampleApplication.java: Main class with client logic</span>
<span class="java-package">package</span> <span class="java-classname">com.telusko</span>;

<span class="java-import">import</span> <span class="java-classname">com.telusko.model.Student</span>;
<span class="java-import">import</span> <span class="java-classname">com.telusko.service.StudentService</span>;
<span class="java-import">import</span> <span class="java-classname">org.springframework.boot.SpringApplication</span>;
<span class="java-import">import</span> <span class="java-classname">org.springframework.boot.autoconfigure.SpringBootApplication</span>;
<span class="java-import">import</span> <span class="java-classname">org.springframework.context.ApplicationContext</span>;

<span class="java-comment">// @SpringBootApplication: Enables auto-configuration and component scanning</span>
<span class="java-annotation">@SpringBootApplication</span>
<span class="java-keyword">public</span> <span class="java-classname">class</span> <span class="java-classname">SpringJdbcExampleApplication</span> {
    <span class="java-comment">// Main method: Entry point, starts the application and tests the service</span>
    <span class="java-keyword">public</span> <span class="java-keyword">static</span> <span class="java-keyword">void</span> <span class="java-method">main</span>(<span class="java-classname">String</span>[] <span class="java-parameter">args</span>) {
        <span class="java-comment">// Start the Spring application and get the ApplicationContext</span>
        <span class="java-classname">ApplicationContext</span> <span class="java-field">context</span> = <span class="java-classname">SpringApplication</span>.<span class="java-method">run</span>(<span class="java-classname">SpringJdbcExampleApplication</span>.<span class="java-classname">class</span>, <span class="java-parameter">args</span>);
        <span class="java-comment">// Retrieve a Student bean (prototype scope ensures a new instance)</span>
        <span class="java-classname">Student</span> <span class="java-field">s</span> = <span class="java-field">context</span>.<span class="java-method">getBean</span>(<span class="java-classname">Student</span>.<span class="java-classname">class</span>);
        <span class="java-comment">// Set student properties</span>
        <span class="java-field">s</span>.<span class="java-method">setRollNo</span>(101);
        <span class="java-field">s</span>.<span class="java-method">setName</span>(<span class="java-string">"Navin"</span>);
        <span class="java-field">s</span>.<span class="java-method">setMarks</span>(78);

        <span class="java-comment">// Retrieve StudentService bean</span>
        <span class="java-classname">StudentService</span> <span class="java-field">service</span> = <span class="java-field">context</span>.<span class="java-method">getBean</span>(<span class="java-classname">StudentService</span>.<span class="java-classname">class</span>);
        <span class="java-comment">// Add the student via the service layer</span>
        <span class="java-field">service</span>.<span class="java-method">addStudent</span>(<span class="java-field">s</span>);
        <span class="java-comment">// Retrieve and print all students</span>
        <span class="java-classname">System</span>.<span class="java-field">out</span>.<span class="java-method">println</span>(<span class="java-field">service</span>.<span class="java-method">getStudents</span>());
    }
}
            </pre>
        <h3 class="subsection-title">Explanation of Layers</h3>
        <div class="content-line">
          <strong>Model:</strong> Maps to a database table (Student class
          corresponds to the student table).
        </div>
        <div class="content-line">
          <strong>Service:</strong> Encapsulates business logic, delegating
          database operations to the repository.
        </div>
        <div class="content-line">
          <strong>Repository:</strong> Handles SQL queries and database
          interactions.
        </div>
        <div class="content-line">
          <strong>Main Class:</strong> Simulates a client, testing the
          application flow.
        </div>
      </div>

      <div class="section" id="jdbc-template">
        <h2 class="section-title">4. JDBC Template</h2>
        <h3 class="subsection-title">Explanation</h3>
        <div class="content-line">
          JdbcTemplate is the core component of Spring JDBC, simplifying
          database operations by providing methods to execute SQL queries,
          update data, and handle result sets.
        </div>
        <div class="content-line">
          It abstracts low-level JDBC tasks like connection management and
          exception handling.
        </div>
        <h3 class="subsection-title">Key Features</h3>
        <div class="content-line"><strong>Methods:</strong></div>
        <ul>
          <li>
            <div class="content-line">
              update(String sql, Object... args): Executes INSERT, UPDATE,
              DELETE queries.
            </div>
          </li>
          <li>
            <div class="content-line">
              query(String sql, RowMapper&lt;T&gt; rowMapper): Executes SELECT
              queries and maps result sets to objects.
            </div>
          </li>
        </ul>
        <div class="content-line"><strong>Advantages:</strong></div>
        <ul>
          <li><div class="content-line">Reduces boilerplate code.</div></li>
          <li>
            <div class="content-line">
              Automatically manages resources (connections, statements).
            </div>
          </li>
          <li>
            <div class="content-line">
              Simplifies parameterized queries using prepared statements.
            </div>
          </li>
        </ul>
        <h3 class="subsection-title">Implementation</h3>
        <div class="content-line">
          Inject JdbcTemplate: Use @Autowired to inject JdbcTemplate into the
          repository.
        </div>
        <div class="content-line">
          Save Method: Use update to insert a student record with prepared
          statements.
        </div>
        <h3 class="subsection-title">Code Reference</h3>
        <div class="content-line">
          The StudentRepo code above includes the save method using
          JdbcTemplate.update. The findAll method is updated later with
          RowMapper.
        </div>
      </div>

      <div class="section" id="schema-data">
        <h2 class="section-title">5. Schema and Data Files</h2>
        <h3 class="subsection-title">Explanation</h3>
        <div class="content-line">
          For H2, you define the database schema and pre-populate data using
          schema.sql and data.sql files in src/main/resources.
        </div>
        <div class="content-line">
          Spring Boot automatically executes these files during startup.
        </div>
        <h3 class="subsection-title">Files</h3>
        <div class="content-line"><strong>schema.sql:</strong></div>
        <div class="content-line">Defines the student table structure.</div>
        <div class="code-heading">schema.sql</div>
        <pre
          class="code-block"
        ><code>-- schema.sql: Defines the database schema for H2
-- Creates the 'student' table with three columns
create table student (
    rollno int primary key, -- Primary key, unique identifier
    name varchar(50),       -- Student name, max 50 characters
    marks int               -- Student marks
);</code></pre>
        <div class="content-line"><strong>data.sql:</strong></div>
        <div class="content-line">
          Inserts initial data into the student table.
        </div>
        <div class="code-heading">data.sql</div>
        <pre
          class="code-block"
        ><code>-- data.sql: Pre-populates the 'student' table with initial data
insert into student (rollno, name, marks) values (101, 'Kiran', 79);
insert into student (rollno, name, marks) values (102, 'Harsh', 68);
insert into student (rollno, name, marks) values (103, 'Suman', 82);</code></pre>
        <h3 class="subsection-title">Notes</h3>
        <div class="content-line">
          <strong>Automatic Loading:</strong> Spring Boot executes schema.sql
          and data.sql for H2.
        </div>
        <div class="content-line">
          <strong>Error Handling:</strong> Missing schema.sql causes a “Table
          not found” error, resolved by adding the file.
        </div>
        <div class="content-line">
          <strong>H2 Specific:</strong> These files are used for in-memory
          databases; external databases require manual schema setup.
        </div>
      </div>

      <div class="section" id="rowmapper">
        <h2 class="section-title">6. RowMapper</h2>
        <h3 class="subsection-title">Explanation</h3>
        <div class="content-line">
          RowMapper is an interface in Spring JDBC used to map ResultSet rows to
          Java objects.
        </div>
        <div class="content-line">
          It is used with JdbcTemplate.query to retrieve data from SELECT
          queries.
        </div>
        <h3 class="subsection-title">Key Points</h3>
        <div class="content-line">
          <strong>Interface:</strong> RowMapper&lt;T&gt; defines T
          mapRow(ResultSet rs, int rowNum).
        </div>
        <div class="content-line">
          <strong>Purpose:</strong> Converts each row into an instance of the
          specified type (Student).
        </div>
        <div class="content-line"><strong>Implementation Options:</strong></div>
        <ul>
          <li><div class="content-line">Anonymous class.</div></li>
          <li>
            <div class="content-line">
              Lambda expression (used for conciseness).
            </div>
          </li>
        </ul>
        <h3 class="subsection-title">Implementation</h3>
        <div class="content-line">
          Query Method: Use JdbcTemplate.query with a SQL query and a RowMapper
          to fetch all students.
        </div>
        <div class="code-heading">StudentRepo.java</div>
        <pre class="code-block">
<span class="java-comment">// StudentRepo.java: Updated with RowMapper for findAll</span>
<span class="java-package">package</span> <span class="java-classname">com.telusko.repo</span>;

<span class="java-import">import</span> <span class="java-classname">com.telusko.model.Student</span>;
<span class="java-import">import</span> <span class="java-classname">org.springframework.beans.factory.annotation.Autowired</span>;
<span class="java-import">import</span> <span class="java-classname">org.springframework.jdbc.core.JdbcTemplate</span>;
<span class="java-import">import</span> <span class="java-classname">org.springframework.stereotype.Repository</span>;

<span class="java-import">import</span> <span class="java-classname">java.util.List</span>;

<span class="java-comment">// @Repository: Marks the class as a repository-layer bean</span>
<span class="java-annotation">@Repository</span>
<span class="java-keyword">public</span> <span class="java-classname">class</span> <span class="java-classname">StudentRepo</span> {
    <span class="java-comment">// JdbcTemplate: For executing SQL queries</span>
    <span class="java-keyword">private</span> <span class="java-classname">JdbcTemplate</span> <span class="java-field">jdbc</span>;

    <span class="java-comment">// @Autowired: Injects JdbcTemplate</span>
    <span class="java-annotation">@Autowired</span>
    <span class="java-keyword">public</span> <span class="java-keyword">void</span> <span class="java-method">setJdbc</span>(<span class="java-classname">JdbcTemplate</span> <span class="java-parameter">jdbc</span>) {
        <span class="java-keyword">this</span>.<span class="java-field">jdbc</span> = <span class="java-parameter">jdbc</span>;
    }

    <span class="java-comment">// save: Inserts a student record</span>
    <span class="java-keyword">public</span> <span class="java-keyword">void</span> <span class="java-method">save</span>(<span class="java-classname">Student</span> <span class="java-parameter">s</span>) {
        <span class="java-classname">String</span> <span class="java-field">sql</span> = <span class="java-string">"insert into student (rollno, name, marks) values (?, ?, ?)"</span>;
        <span class="java-classname">int</span> <span class="java-field">rows</span> = <span class="java-field">jdbc</span>.<span class="java-method">update</span>(<span class="java-field">sql</span>, <span class="java-parameter">s</span>.<span class="java-method">getRollNo</span>(), <span class="java-parameter">s</span>.<span class="java-method">getName</span>(), <span class="java-parameter">s</span>.<span class="java-method">getMarks</span>());
        <span class="java-classname">System</span>.<span class="java-field">out</span>.<span class="java-method">println</span>(<span class="java-field">rows</span> + <span class="java-string">" affected"</span>);
    }

    <span class="java-comment">// findAll: Retrieves all student records using RowMapper</span>
    <span class="java-keyword">public</span> <span class="java-classname">List</span><<span class="java-classname">Student</span>> <span class="java-method">findAll</span>() {
        <span class="java-comment">// SQL query to select all rows from the student table</span>
        <span class="java-classname">String</span> <span class="java-field">sql</span> = <span class="java-string">"select * from student"</span>;
        <span class="java-comment">// Execute query and map each row to a Student object using lambda</span>
        <span class="java-keyword">return</span> <span class="java-field">jdbc</span>.<span class="java-method">query</span>(<span class="java-field">sql</span>, (<span class="java-parameter">rs</span>, <span class="java-parameter">rowNum</span>) -> {
            <span class="java-comment">// Create a new Student object for each row</span>
            <span class="java-classname">Student</span> <span class="java-field">s</span> = <span class="java-keyword">new</span> <span class="java-classname">Student</span>();
            <span class="java-comment">// Map ResultSet columns to Student properties</span>
            <span class="java-field">s</span>.<span class="java-method">setRollNo</span>(<span class="java-parameter">rs</span>.<span class="java-method">getInt</span>(<span class="java-string">"rollno"</span>));
            <span class="java-field">s</span>.<span class="java-method">setName</span>(<span class="java-parameter">rs</span>.<span class="java-method">getString</span>(<span class="java-string">"name"</span>));
            <span class="java-field">s</span>.<span class="java-method">setMarks</span>(<span class="java-parameter">rs</span>.<span class="java-method">getInt</span>(<span class="java-string">"marks"</span>));
            <span class="java-comment">// Return the mapped Student object</span>
            <span class="java-keyword">return</span> <span class="java-field">s</span>;
        });
    }
}
            </pre>
        <h3 class="subsection-title">Explanation of Code</h3>
        <div class="content-line">
          <strong>SQL Query:</strong> select * from student retrieves all rows.
        </div>
        <div class="content-line"><strong>Lambda Expression:</strong></div>
        <ul>
          <li>
            <div class="content-line">Takes ResultSet (rs) and rowNum.</div>
          </li>
          <li>
            <div class="content-line">Creates a Student object per row.</div>
          </li>
          <li>
            <div class="content-line">
              Maps columns to properties using getInt and getString.
            </div>
          </li>
          <li><div class="content-line">Returns the Student object.</div></li>
        </ul>
        <div class="content-line">
          <strong>Return Type:</strong> query returns a List&lt;Student&gt;.
        </div>
        <h3 class="subsection-title">Output</h3>
        <div class="content-line">
          Inserts a new student and retrieves all students:
        </div>
        <div class="content-line">1 affected</div>
        <div class="content-line">
          [Student{rollNo=101, name='Kiran', marks=79}, Student{rollNo=102,
          name='Harsh', marks=68}, Student{rollNo=103, name='Suman', marks=82},
          Student{rollNo=101, name='Navin', marks=78}]
        </div>
      </div>

      <div class="section" id="postgresql">
        <h2 class="section-title">7. Using PostgreSQL with Spring JDBC</h2>
        <h3 class="subsection-title">Explanation</h3>
        <div class="content-line">
          Switching to PostgreSQL requires updating dependencies, configuring
          the DataSource, and setting up the schema/data in PostgreSQL.
        </div>
        <h3 class="subsection-title">Steps</h3>
        <div class="content-line"><strong>Update Dependencies:</strong></div>
        <div class="content-line">
          Remove H2 and add PostgreSQL driver in pom.xml.
        </div>
        <div class="code-heading">pom.xml</div>
        <pre
          class="code-block"
        ><code>&lt;!-- pom.xml: Updated for PostgreSQL --&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;3.2.0&lt;/version&gt;
        &lt;relativePath/&gt;
    &lt;/parent&gt;
    &lt;groupId&gt;com.telusko&lt;/groupId&gt;
    &lt;artifactId&gt;SpringJDBCExample&lt;/artifactId&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
    &lt;name&gt;SpringJDBCExample&lt;/name&gt;
    &lt;description&gt;Demo project for Spring Boot and JDBC&lt;/description&gt;
    &lt;properties&gt;
        &lt;java.version&gt;17&lt;/java.version&gt;
    &lt;/properties&gt;
    &lt;dependencies&gt;
        &lt;!-- Spring Boot Starter JDBC --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;!-- PostgreSQL Driver --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;
            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;
            &lt;scope&gt;runtime&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;!-- Spring Boot Starter Test --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;</code></pre>
        <div class="content-line"><strong>Configure DataSource:</strong></div>
        <div class="content-line">
          Add PostgreSQL connection details in application.properties.
        </div>
        <div class="code-heading">application.properties</div>
        <pre
          class="code-block"
        ><code># application.properties: Configures PostgreSQL DataSource
# JDBC URL: Specifies the database location and name
spring.datasource.url=jdbc:postgresql://localhost:5432/telusko
# Username for PostgreSQL
spring.datasource.username=postgres
# Password for PostgreSQL
spring.datasource.password=0000
# Driver class for PostgreSQL
spring.datasource.driver-class-name=org.postgresql.Driver</code></pre>
        <div class="content-line">
          <strong>Create Schema and Data in PostgreSQL:</strong>
        </div>
        <div class="content-line">
          Use pgAdmin to create a database (telusko) and table (student).
        </div>
        <div class="content-line"><strong>Schema Query:</strong></div>
        <pre
          class="code-block"
        ><code>-- Creates the 'student' table in PostgreSQL
create table student (
    rollno int primary key,
    name varchar(50),
    marks int
);</code></pre>
        <div class="content-line"><strong>Data Query:</strong></div>
        <pre
          class="code-block"
        ><code>-- Inserts initial data into the 'student' table
insert into student (rollno, name, marks) values (101, 'Kiran', 79);
insert into student (rollno, name, marks) values (102, 'Harsh', 75);
insert into student (rollno, name, marks) values (103, 'Suman', 82);</code></pre>
        <div class="content-line"><strong>Update Query:</strong></div>
        <pre
          class="code-block"
        ><code>-- Updates marks for rollno 102 to differentiate from H2
update student set marks = 75 where rollno = 102;</code></pre>
        <div class="content-line"><strong>Run the Application:</strong></div>
        <div class="content-line">
          The same StudentRepo code works without changes.
        </div>
        <div class="content-line">
          Output shows Harsh with marks=75, confirming PostgreSQL usage.
        </div>
        <h3 class="subsection-title">Notes</h3>
        <div class="content-line">
          <strong>No Code Changes:</strong> The repository, service, and model
          layers are database-agnostic.
        </div>
        <div class="content-line">
          <strong>Configuration:</strong> External databases require explicit
          DataSource configuration.
        </div>
        <div class="content-line">
          <strong>Error Handling:</strong> Missing configuration causes a “URL
          not specified” error.
        </div>
      </div>

      <div class="section" id="databases">
        <h2 class="section-title">8. Databases Used</h2>
        <table>
          <tr>
            <th>Database</th>
            <th>Type</th>
            <th>Description</th>
            <th>Configuration</th>
            <th>Use Case</th>
          </tr>
          <tr>
            <td>H2</td>
            <td>In-Memory</td>
            <td>
              Lightweight, embedded database; data is lost when the application
              stops.
            </td>
            <td>
              Auto-configured by Spring Boot; uses schema.sql and data.sql.
            </td>
            <td>Development, testing</td>
          </tr>
          <tr>
            <td>PostgreSQL</td>
            <td>External (RDBMS)</td>
            <td>
              Persistent, production-grade database; requires external setup.
            </td>
            <td>
              Requires application.properties with URL, username, password, and
              driver class.
            </td>
            <td>Production, persistent storage</td>
          </tr>
        </table>
      </div>

      <div class="section" id="takeaways">
        <h2 class="section-title">9. Key Takeaways</h2>
        <div class="content-line">
          <strong>Spring JDBC:</strong> Simplifies JDBC operations with less
          boilerplate.
        </div>
        <div class="content-line">
          <strong>JdbcTemplate:</strong> Core component for SQL execution and
          result mapping.
        </div>
        <div class="content-line">
          <strong>Layered Architecture:</strong> Ensures separation of concerns.
        </div>
        <div class="content-line">
          <strong>H2 Database:</strong> Ideal for prototyping.
        </div>
        <div class="content-line">
          <strong>PostgreSQL:</strong> Suitable for production with minimal
          changes.
        </div>
        <div class="content-line">
          <strong>RowMapper:</strong> Maps database rows to objects, supporting
          lambda expressions.
        </div>
        <div class="content-line">
          <strong>Portability:</strong> Easy to switch databases with
          configuration changes.
        </div>
      </div>

      <div class="section" id="additional-notes">
        <h2 class="section-title">10. Additional Notes</h2>
        <div class="content-line">
          <strong>Code Repository:</strong>
          <a href="https://github.com/navinreddy20/spring6-course"
            >GitHub - navinreddy20/spring6-course</a
          >.
        </div>
        <div class="content-line">
          <strong>Lambda Expressions:</strong> Simplify RowMapper
          implementation.
        </div>
        <div class="content-line">
          <strong>Connection Pooling:</strong> HikariCP is used by default.
        </div>
        <div class="content-line">
          <strong>Error Debugging:</strong> Common errors are resolved by
          ensuring proper schema and configuration.
        </div>
      </div>
    </div>
  </body>
</html>
