<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hibernate 6 Tutorial</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f1f1f1;
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }
        .white-bg { background-color: #ffffff; color: #333; }
        .grey-bg { background-color: #e0e0e0; color: #333; }
        .black-bg { background-color: #1a1a1a; color: #ffffff; }
        .bg-switcher {
            position: fixed;
            top: 10px;
            right: 10px;
            z-index: 1000;
            font-size: 16px;
        }
        .bg-switcher label { 
            margin-right: 10px; 
            color: inherit;
        }
        .bg-switcher select {
            padding: 5px;
            border-radius: 5px;
            background-color: #04AA6D;
            color: white;
            border: none;
            cursor: pointer;
        }
        .bg-switcher select:focus {
            outline: 2px solid #059862;
        }
        .sidebar {
            width: 250px;
            background-color: #04AA6D;
            position: fixed;
            top: 0;
            left: 0;
            height: 100%;
            padding-top: 20px;
            color: white;
            overflow-y: auto;
        }
        .sidebar-title {
            font-size: 24px;
            text-align: center;
            margin-bottom: 30px;
        }
        .sidebar-link {
            display: block;
            padding: 12px 20px;
            color: white;
            text-decoration: none;
            font-size: 18px;
            transition: background-color 0.3s;
        }
        .sidebar-link:hover { background-color: #059862; }
        .sidebar-link:focus {
            outline: 2px solid white;
        }
        .main-content { 
            margin-left: 270px; 
            padding: 30px; 
        }
        .header {
            background-color: #282A35;
            color: white;
            padding: 20px;
            text-align: center;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .header-title { font-size: 36px; margin: 0; }
        .header-subtitle { font-size: 18px; margin-top: 10px; }
        .section {
            margin: 20px 0;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .white-bg .section { background-color: #f9f9f9; }
        .grey-bg .section { background-color: #d0d0d0; }
        .black-bg .section { background-color: #2a2a2a; }
        .section-title { font-size: 28px; color: #04AA6D; margin-bottom: 15px; }
        .subsection-title { font-size: 22px; margin: 15px 0 10px; color: inherit; }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
            background-color: #ffffff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            overflow-x: auto;
        }
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #04AA6D;
            color: white;
            font-weight: bold;
        }
        tr:nth-child(even) { background-color: #f9f9f9; }
        tr:hover { background-color: #f1f1f1; }
        .content-line {
            font-size: 16px;
            margin: 8px 0;
            padding: 10px;
            border-left: 4px solid #04AA6D;
        }
        .content-line.black-highlight {
            border-left: 4px solid #000000;
        }
        .white-bg .content-line { background-color: #f0f0f0; }
        .grey-bg .content-line { background-color: #c0c0c0; }
        .black-bg .content-line { background-color: #333333; }
        .code-block {
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 16px;
            overflow-x: auto;
            margin: 10px 0;
        }
        .white-bg .code-block { background-color: #282A35; color: white; }
        .grey-bg .code-block { background-color: #3a3a3a; color: white; }
        .black-bg .code-block { background-color: #ffffff; color: #333; }
        .code-block::-webkit-scrollbar {
            height: 8px;
        }
        .code-block::-webkit-scrollbar-thumb {
            background-color: #04AA6D;
            border-radius: 4px;
        }
        .code-block::-webkit-scrollbar-track {
            background-color: #f1f1f1;
        }
        /* Syntax highlighting styles */
        .keyword-highlight { color: #FFA500; font-size: 16px; } /* Orange for keywords */
        .string-highlight { color: #00FF00; } /* Green for strings */
        .comment-highlight { color: #808080; } /* Grey for comments */
        .class-highlight { color: #00CED1; } /* Cyan for class names */
        .annotation-highlight { color: #C71585; } /* Purple for annotations */
        .highlight { color: #FF4500; font-weight: bold; }
        strong { font-weight: bold; }
        .code-heading {
            color: #000000;
            font-weight: bold;
            font-size: 16px;
        }
        a { color: #04AA6D; text-decoration: none; }
        a:hover { text-decoration: underline; }
        ul, ol { margin: 10px 0; padding-left: 20px; }
        li { margin: 5px 0; }
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                height: auto;
                position: relative;
            }
            .main-content {
                margin-left: 0;
            }
        }
    </style>
</head>
<body class="white-bg">
    <div class="bg-switcher">
        <label for="bg-select">Background:</label>
        <select id="bg-select" onchange="document.body.className=this.value + '-bg'">
            <option value="white">White</option>
            <option value="grey">Grey</option>
            <option value="black">Black</option>
        </select>
    </div>

    <div class="sidebar">
        <div class="sidebar-title">Hibernate 6 Tutorial</div>
        <a href="#introduction" class="sidebar-link">Introduction</a>
        <a href="#project-setup" class="sidebar-link">Project Setup</a>
        <a href="#configuring-hibernate" class="sidebar-link">Configuring Hibernate</a>
        <a href="#saving-data" class="sidebar-link">Saving Data</a>
        <a href="#fetching-data" class="sidebar-link">Fetching Data</a>
        <a href="#updating-deleting" class="sidebar-link">Updating & Deleting</a>
        <a href="#customizing-table-columns" class="sidebar-link">Customizing Table/Columns</a>
        <a href="#embedding-objects" class="sidebar-link">Embedding Objects</a>
        <a href="#mapping-relationships" class="sidebar-link">Mapping Relationships</a>
        <a href="#eager-lazy-fetching" class="sidebar-link">Eager & Lazy Fetching</a>
        <a href="#hibernate-caching" class="sidebar-link">Hibernate Caching</a>
        <a href="#hibernate-query-language" class="sidebar-link">Hibernate Query Language</a>
        <a href="#fetching-with-filters" class="sidebar-link">Fetching with Filters</a>
        <a href="#get-vs-load" class="sidebar-link">Get vs. Load</a>
        <a href="#level-2-cache" class="sidebar-link">Level 2 Cache</a>
        <a href="#chat-client-example" class="sidebar-link">Chat Client Example</a>
    </div>

    <div class="main-content">
        <div class="header">
            <h1 class="header-title">Hibernate 6 Tutorial</h1>
            <p class="header-subtitle">Comprehensive Notes on Database Operations and Mapping</p>
        </div>

        <div class="section" id="introduction">
            <h2 class="section-title">Introduction to Hibernate</h2>
            <p>This guide provides concise, structured notes on Hibernate 6, covering its setup, core concepts, and advanced features such as saving, fetching, updating, deleting, customizing table/column names, embedding objects, mapping relationships, caching, and querying with Hibernate Query Language (HQL). Examples use a PostgreSQL database named telusko. Code is sourced from navinreddy20/hibernate6.</p>
            <h3 class="subsection-title">Key Points</h3>
            <ul>
                <li class="content-line"><strong>Hibernate:</strong> An Object-Relational Mapping (ORM) framework that maps Java objects to database tables.</li>
                <li class="content-line"><strong>Purpose:</strong> Eliminates manual SQL queries (unlike JDBC), enabling direct object persistence.</li>
                <li class="content-line"><strong>Benefits:</strong> Boosts productivity with clean code, caching, optimization, and database portability (e.g., MySQL to PostgreSQL).</li>
                <li class="content-line"><strong>Spring Data JPA:</strong> Builds on Hibernate; this guide focuses on standalone Hibernate.</li>
                <li class="content-line"><strong>Paradigm Mismatch:</strong> Addresses differences between Javaâ€™s object-oriented model and relational databases.</li>
                <li class="content-line"><strong>Conversions:</strong> Handles data type mappings (e.g., int to INTEGER, String to TEXT) and naming conventions (camelCase to snake_case).</li>
                <li class="content-line"><strong>Additional Insight:</strong> Hibernate supports JPA (Jakarta Persistence API), ensuring portability across ORM frameworks.</li>
            </ul>
            <h3 class="subsection-title">Diagram: Hibernate ORM Concept</h3>
            <pre class="code-block">
[Java Object (Student)]  [Hibernate ORM]  [Database Table (student)]
 rollNo, sName, sAge                |              rollNo, s_name, s_age

Figure 1: Hibernate ORM Mapping
            </pre>
        </div>

        <div class="section" id="project-setup">
            <h2 class="section-title">Project Setup</h2>
            <h3 class="subsection-title">Key Points</h3>
            <ul>
                <li class="content-line">Create a Maven project in IntelliJ IDEA (Community/Ultimate) with JDK 21+.</li>
                <li class="content-line">Add Hibernate Core (6.6.3) and PostgreSQL driver (42.7.3) dependencies in pom.xml.</li>
                <li class="content-line">Configure a PostgreSQL database (telusko) using pgAdmin.</li>
                <li class="content-line">Set up hibernate.cfg.xml in the resources directory for database connection.</li>
                <li class="content-line"><strong>Additional Insight:</strong> Maven simplifies dependency management, and IntelliJâ€™s Maven integration ensures seamless library imports.</li>
            </ul>
            <h3 class="subsection-title">Code Example: pom.xml</h3>
            <pre class="code-block">
<span class="keyword-highlight">&lt;?xml</span> <span class="highlight">version</span>=<span class="string-highlight">"1.0"</span> <span class="highlight">encoding</span>=<span class="string-highlight">"UTF-8"</span><span class="keyword-highlight">?&gt;</span>
<span class="keyword-highlight">&lt;project</span> <span class="highlight">xmlns</span>=<span class="string-highlight">"http://maven.apache.org/POM/4.0.0"</span>
         <span class="highlight">xmlns:xsi</span>=<span class="string-highlight">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="highlight">xsi:schemaLocation</span>=<span class="string-highlight">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span><span class="keyword-highlight">&gt;</span>
    <span class="keyword-highlight">&lt;modelVersion&gt;</span>4.0.0<span class="keyword-highlight">&lt;/modelVersion&gt;</span>

    <span class="keyword-highlight">&lt;groupId&gt;</span>org.example<span class="keyword-highlight">&lt;/groupId&gt;</span>
    <span class="keyword-highlight">&lt;artifactId&gt;</span>HibProject<span class="keyword-highlight">&lt;/artifactId&gt;</span>
    <span class="keyword-highlight">&lt;version&gt;</span>1.0-SNAPSHOT<span class="keyword-highlight">&lt;/version&gt;</span>

    <span class="keyword-highlight">&lt;properties&gt;</span>
        <span class="keyword-highlight">&lt;maven.compiler.source&gt;</span>21<span class="keyword-highlight">&lt;/maven.compiler.source&gt;</span>
        <span class="keyword-highlight">&lt;maven.compiler.target&gt;</span>21<span class="keyword-highlight">&lt;/maven.compiler.target&gt;</span>
        <span class="keyword-highlight">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="keyword-highlight">&lt;/project.build.sourceEncoding&gt;</span>
    <span class="keyword-highlight">&lt;/properties&gt;</span>

    <span class="keyword-highlight">&lt;dependencies&gt;</span>
        <span class="comment-highlight">&lt;!-- Hibernate Core: Provides ORM functionality for mapping Java objects to database tables --&gt;</span>
        <span class="keyword-highlight">&lt;dependency&gt;</span>
            <span class="keyword-highlight">&lt;groupId&gt;</span>org.hibernate.orm<span class="keyword-highlight">&lt;/groupId&gt;</span>
            <span class="keyword-highlight">&lt;artifactId&gt;</span>hibernate-core<span class="keyword-highlight">&lt;/artifactId&gt;</span>
            <span class="keyword-highlight">&lt;version&gt;</span>6.6.3<span class="keyword-highlight">&lt;/version&gt;</span>
        <span class="keyword-highlight">&lt;/dependency&gt;</span>
        <span class="comment-highlight">&lt;!-- PostgreSQL Driver: Enables JDBC connectivity to PostgreSQL databases --&gt;</span>
        <span class="keyword-highlight">&lt;dependency&gt;</span>
            <span class="keyword-highlight">&lt;groupId&gt;</span>org.postgresql<span class="keyword-highlight">&lt;/groupId&gt;</span>
            <span class="keyword-highlight">&lt;artifactId&gt;</span>postgresql<span class="keyword-highlight">&lt;/artifactId&gt;</span>
            <span class="keyword-highlight">&lt;version&gt;</span>42.7.3<span class="keyword-highlight">&lt;/version&gt;</span>
        <span class="keyword-highlight">&lt;/dependency&gt;</span>
    <span class="keyword-highlight">&lt;/dependencies&gt;</span>
<span class="keyword-highlight">&lt;/project&gt;</span>
            </pre>
            <h3 class="subsection-title">Code Explanation</h3>
            <ul>
                <li class="content-line"><strong>hibernate-core:</strong> Core library for Hibernateâ€™s ORM functionality, including session management and entity mapping.</li>
                <li class="content-line"><strong>postgresql:</strong> JDBC driver for PostgreSQL, enabling database connectivity.</li>
                <li class="content-line"><strong>Maven Reload:</strong> Downloads dependencies, visible in IntelliJâ€™s external libraries.</li>
                <li class="content-line"><strong>Additional Insight:</strong> Use &lt;scope&gt;runtime&lt;/scope&gt; for the PostgreSQL driver if itâ€™s only needed at runtime.</li>
            </ul>
            <h3 class="subsection-title">Database Setup</h3>
            <table>
                <tr>
                    <th>Database</th>
                    <th>Name</th>
                    <th>Tool</th>
                    <th>Purpose</th>
                </tr>
                <tr>
                    <td>PostgreSQL</td>
                    <td>telusko</td>
                    <td>pgAdmin</td>
                    <td>Store application data</td>
                </tr>
            </table>
        </div>

        <div class="section" id="configuring-hibernate">
            <h2 class="section-title">Configuring Hibernate</h2>
            <h3 class="subsection-title">Key Points</h3>
            <ul>
                <li class="content-line">Create hibernate.cfg.xml in resources for database connection and Hibernate properties.</li>
                <li class="content-line">Specify JDBC driver, connection URL, credentials, dialect, and settings like show_sql, format_sql, and hbm2ddl.auto.</li>
                <li class="content-line">Use update for hbm2ddl.auto in development to create/update tables.</li>
                <li class="content-line">The dialect ensures compatibility with PostgreSQLâ€™s SQL variations.</li>
                <li class="content-line"><strong>Additional Insight:</strong> Dialects optimize SQL generation for specific databases, improving performance and compatibility.</li>
            </ul>
            <h3 class="subsection-title">Code Example: hibernate.cfg.xml</h3>
            <pre class="code-block">
<span class="keyword-highlight">&lt;?xml</span> <span class="highlight">version</span>=<span class="string-highlight">'1.0'</span> <span class="highlight">encoding</span>=<span class="string-highlight">'utf-8'</span><span class="keyword-highlight">?&gt;</span>
<span class="keyword-highlight">&lt;!DOCTYPE</span> hibernate-configuration <span class="highlight">PUBLIC</span>
        <span class="string-highlight">"-//Hibernate/Hibernate Configuration DTD//EN"</span>
        <span class="string-highlight">"http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd"</span><span class="keyword-highlight">&gt;</span>
<span class="keyword-highlight">&lt;hibernate-configuration&gt;</span>
    <span class="keyword-highlight">&lt;session-factory&gt;</span>
        <span class="comment-highlight">&lt;!-- JDBC driver class for PostgreSQL --&gt;</span>
        <span class="keyword-highlight">&lt;property</span> <span class="highlight">name</span>=<span class="string-highlight">"hibernate.connection.driver_class"</span><span class="keyword-highlight">&gt;</span>org.postgresql.Driver<span class="keyword-highlight">&lt;/property&gt;</span>
        <span class="comment-highlight">&lt;!-- Database connection URL for telusko database --&gt;</span>
        <span class="keyword-highlight">&lt;property</span> <span class="highlight">name</span>=<span class="string-highlight">"hibernate.connection.url"</span><span class="keyword-highlight">&gt;</span>jdbc:postgresql://localhost:5432/telusko<span class="keyword-highlight">&lt;/property&gt;</span>
        <span class="comment-highlight">&lt;!-- Database username --&gt;</span>
        <span class="keyword-highlight">&lt;property</span> <span class="highlight">name</span>=<span class="string-highlight">"hibernate.connection.username"</span><span class="keyword-highlight">&gt;</span>postgres<span class="keyword-highlight">&lt;/property&gt;</span>
        <span class="comment-highlight">&lt;!-- Database password (configure securely in production) --&gt;</span>
        <span class="keyword-highlight">&lt;property</span> <span class="highlight">name</span>=<span class="string-highlight">"hibernate.connection.password"</span><span class="keyword-highlight">&gt;</span><span class="keyword-highlight">&lt;/property&gt;</span>
        <span class="comment-highlight">&lt;!-- PostgreSQL dialect for SQL compatibility --&gt;</span>
        <span class="keyword-highlight">&lt;property</span> <span class="highlight">name</span>=<span class="string-highlight">"hibernate.dialect"</span><span class="keyword-highlight">&gt;</span>org.hibernate.dialect.PostgreSQLDialect<span class="keyword-highlight">&lt;/property&gt;</span>
        <span class="comment-highlight">&lt;!-- Display generated SQL in console for debugging --&gt;</span>
        <span class="keyword-highlight">&lt;property</span> <span class="highlight">name</span>=<span class="string-highlight">"hibernate.show_sql"</span><span class="keyword-highlight">&gt;</span>true<span class="keyword-highlight">&lt;/property&gt;</span>
        <span class="comment-highlight">&lt;!-- Format SQL for better readability --&gt;</span>
        <span class="keyword-highlight">&lt;property</span> <span class="highlight">name</span>=<span class="string-highlight">"hibernate.format_sql"</span><span class="keyword-highlight">&gt;</span>true<span class="keyword-highlight">&lt;/property&gt;</span>
        <span class="comment-highlight">&lt;!-- Automatically create/update tables during development --&gt;</span>
        <span class="keyword-highlight">&lt;property</span> <span class="highlight">name</span>=<span class="string-highlight">"hibernate.hbm2ddl.auto"</span><span class="keyword-highlight">&gt;</span>update<span class="keyword-highlight">&lt;/property&gt;</span>
    <span class="keyword-highlight">&lt;/session-factory&gt;</span>
<span class="keyword-highlight">&lt;/hibernate-configuration&gt;</span>
            </pre>
            <h3 class="subsection-title">Code Explanation</h3>
            <ul>
                <li class="content-line"><strong>driver_class:</strong> Specifies the PostgreSQL JDBC driver for connectivity.</li>
                <li class="content-line"><strong>connection.url:</strong> Points to the telusko database on localhost.</li>
                <li class="content-line"><strong>username/password:</strong> Database credentials (password omitted for security).</li>
                <li class="content-line"><strong>dialect:</strong> Ensures Hibernate generates PostgreSQL-compatible SQL.</li>
                <li class="content-line"><strong>show_sql:</strong> Logs SQL queries to the console for debugging.</li>
                <li class="content-line"><strong>format_sql:</strong> Formats SQL for readability.</li>
                <li class="content-line"><strong>hbm2ddl.auto:</strong> update creates or updates tables based on entities.</li>
                <li class="content-line"><strong>Additional Insight:</strong> Use validate for hbm2ddl.auto in production to ensure schema matches entities without modifications.</li>
            </ul>
            <h3 class="subsection-title">Diagram: Hibernate Configuration Flow</h3>
            <pre class="code-block">
[Java Application] --> [hibernate.cfg.xml] --> [SessionFactory] --> [Database (telusko)]

Figure 2: Hibernate Configuration Flow
            </pre>
        </div>

        <div class="section" id="saving-data">
            <h2 class="section-title">Saving Data</h2>
            <h3 class="subsection-title">Key Points</h3>
            <ul>
                <li class="content-line">Create an entity class (e.g., Student) with @Entity and @Id annotations.</li>
                <li class="content-line">Use SessionFactory and Session to persist objects with session.persist() (replaces deprecated save()).</li>
                <li class="content-line">Transactions are required for database modifications (beginTransaction(), commit()).</li>
                <li class="content-line">Handle duplicate key errors by ensuring unique primary keys.</li>
                <li class="content-line">hbm2ddl.auto=update creates the table if it doesnâ€™t exist.</li>
                <li class="content-line"><strong>Additional Insight:</strong> persist() ensures the entity is managed by Hibernateâ€™s persistence context, enabling automatic dirty checking.</li>
            </ul>
            <h3 class="subsection-title">Code Example: Student.java</h3>
            <pre class="code-block">
<span class="keyword-highlight">package</span> com.telusko;

<span class="keyword-highlight">import</span> jakarta.persistence.Entity;
<span class="keyword-highlight">import</span> jakarta.persistence.Id;

<span class="comment-highlight">// @Entity: Marks this class as a Hibernate entity, mapping it to a database table (default name: student)</span>
<span class="annotation-highlight">@Entity</span>
<span class="keyword-highlight">public</span> <span class="keyword-highlight">class</span> <span class="class-highlight">Student</span> {
    <span class="comment-highlight">// @Id: Designates rollNo as the primary key for the student table</span>
    <span class="annotation-highlight">@Id</span>
    <span class="keyword-highlight">private</span> <span class="keyword-highlight">int</span> rollNo;
    <span class="keyword-highlight">private</span> String sName;
    <span class="keyword-highlight">private</span> <span class="keyword-highlight">int</span> sAge;

    <span class="comment-highlight">// Getters and setters</span>
    <span class="keyword-highlight">public</span> <span class="keyword-highlight">int</span> getRollNo() {
        <span class="keyword-highlight">return</span> rollNo;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">void</span> setRollNo(<span class="keyword-highlight">int</span> rollNo) {
        <span class="keyword-highlight">this</span>.rollNo = rollNo;
    }

    <span class="keyword-highlight">public</span> String getSname() {
        <span class="keyword-highlight">return</span> sName;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">void</span> setSname(String sName) {
        <span class="keyword-highlight">this</span>.sName = sName;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">int</span> getSage() {
        <span class="keyword-highlight">return</span> sAge;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">void</span> setSage(<span class="keyword-highlight">int</span> sAge) {
        <span class="keyword-highlight">this</span>.sAge = sAge;
    }

    <span class="comment-highlight">// toString for readable output</span>
    <span class="annotation-highlight">@Override</span>
    <span class="keyword-highlight">public</span> String toString() {
        <span class="keyword-highlight">return</span> <span class="string-highlight">"Student{"</span> +
                <span class="string-highlight">"rollNo="</span> + rollNo +
                <span class="string-highlight">", sName='"</span> + sName + <span class="string-highlight">'\''</span> +
                <span class="string-highlight">", sAge="</span> + sAge +
                <span class="string-highlight">'}'</span>;
    }
}
            </pre>
            <h3 class="subsection-title">Annotation Explanation</h3>
            <ul>
                <li class="content-line"><strong>@Entity:</strong> Indicates the class is a persistent entity, mapped to a database table. The table name defaults to the class name (Student â†’ student) unless overridden.</li>
                <li class="content-line"><strong>@Id:</strong> Marks the field as the primary key, ensuring unique identification of records.</li>
            </ul>
            <h3 class="subsection-title">Code Example: Main.java</h3>
            <pre class="code-block">
<span class="keyword-highlight">package</span> com.telusko;

<span class="keyword-highlight">import</span> org.hibernate.Session;
<span class="keyword-highlight">import</span> org.hibernate.SessionFactory;
<span class="keyword-highlight">import</span> org.hibernate.Transaction;
<span class="keyword-highlight">import</span> org.hibernate.cfg.Configuration;

<span class="keyword-highlight">public</span> <span class="keyword-highlight">class</span> <span class="class-highlight">Main</span> {
    <span class="keyword-highlight">public</span> <span class="keyword-highlight">static</span> <span class="keyword-highlight">void</span> main(String[] args) {
        <span class="comment-highlight">// Configure Hibernate and register the Student entity</span>
        <span class="comment-highlight">// Configuration: Loads hibernate.cfg.xml for database settings</span>
        <span class="comment-highlight">// addAnnotatedClass: Registers Student as an entity</span>
        SessionFactory sf = <span class="keyword-highlight">new</span> Configuration()
                .addAnnotatedClass(<span class="class-highlight">Student</span>.class)
                .configure()
                .buildSessionFactory();

        <span class="comment-highlight">// Open a session for database operations</span>
        <span class="keyword-highlight">try</span> (Session session = sf.openSession()) {
            <span class="comment-highlight">// Begin a transaction for data modification (mandatory for writes)</span>
            Transaction tx = session.beginTransaction();

            <span class="comment-highlight">// Create a Student object and set values</span>
            <span class="class-highlight">Student</span> student = <span class="keyword-highlight">new</span> <span class="class-highlight">Student</span>();
            student.setRollNo(106);
            student.setSname(<span class="string-highlight">"Avni"</span>);
            student.setSage(21);

            <span class="comment-highlight">// Persist the object to the database (replaces deprecated save())</span>
            session.persist(student);

            <span class="comment-highlight">// Commit the transaction to save changes to the database</span>
            tx.commit();
        } <span class="keyword-highlight">finally</span> {
            <span class="comment-highlight">// Close the SessionFactory to release resources</span>
            sf.close();
        }
    }
}
            </pre>
            <h3 class="subsection-title">Code Explanation</h3>
            <ul>
                <li class="content-line"><strong>Configuration:</strong> Loads hibernate.cfg.xml and sets up Hibernate.</li>
                <li class="content-line"><strong>addAnnotatedClass:</strong> Registers the Student entity for mapping.</li>
                <li class="content-line"><strong>buildSessionFactory:</strong> Creates a SessionFactory, a thread-safe, heavyweight object for session creation.</li>
                <li class="content-line"><strong>openSession:</strong> Opens a Session for database operations.</li>
                <li class="content-line"><strong>beginTransaction:</strong> Starts a transaction for write operations.</li>
                <li class="content-line"><strong>persist:</strong> Saves the Student object to the database, associating it with the persistence context.</li>
                <li class="content-line"><strong>commit:</strong> Applies changes to the database.</li>
                <li class="content-line"><strong>close:</strong> Releases resources to prevent memory leaks.</li>
                <li class="content-line"><strong>Additional Insight:</strong> Use try-with-resources to ensure Session and SessionFactory are closed automatically.</li>
            </ul>
            <h3 class="subsection-title">Database Table: student</h3>
            <table>
                <tr>
                    <th>rollNo (PK)</th>
                    <th>sName</th>
                    <th>sAge</th>
                </tr>
                <tr>
                    <td>106</td>
                    <td>Avni</td>
                    <td>21</td>
                </tr>
            </table>
        </div>

        <div class="section" id="fetching-data">
            <h2 class="section-title">Fetching Data with Hibernate</h2>
            <h3 class="subsection-title">Key Points</h3>
            <ul>
                <li class="content-line">Use session.get(Class, id) for eager loading by primary key.</li>
                <li class="content-line">Check for null to avoid NullPointerException for non-existent records.</li>
                <li class="content-line">Deprecated load() uses lazy loading, fetching data only when accessed.</li>
                <li class="content-line">Use byId().getReference() for lazy loading in modern Hibernate.</li>
                <li class="content-line">No transaction is needed for fetching.</li>
                <li class="content-line"><strong>Additional Insight:</strong> Eager loading is suitable for small datasets, while lazy loading optimizes performance for large datasets.</li>
            </ul>
            <h3 class="subsection-title">Code Example: FetchMain.java</h3>
            <pre class="code-block">
<span class="keyword-highlight">package</span> com.telusko;

<span class="keyword-highlight">import</span> org.hibernate.Session;
<span class="keyword-highlight">import</span> org.hibernate.SessionFactory;
<span class="keyword-highlight">import</span> org.hibernate.cfg.Configuration;

<span class="keyword-highlight">public</span> <span class="keyword-highlight">class</span> <span class="class-highlight">FetchMain</span> {
    <span class="keyword-highlight">public</span> <span class="keyword-highlight">static</span> <span class="keyword-highlight">void</span> main(String[] args) {
        <span class="comment-highlight">// Configure Hibernate and register the Student entity</span>
        SessionFactory sf = <span class="keyword-highlight">new</span> Configuration()
                .addAnnotatedClass(<span class="class-highlight">Student</span>.class)
                .configure()
                .buildSessionFactory();

        <span class="comment-highlight">// Open a session for fetching data</span>
        <span class="keyword-highlight">try</span> (Session session = sf.openSession()) {
            <span class="comment-highlight">// Fetch a Student object by primary key (eager loading)</span>
            <span class="comment-highlight">// get(): Queries the database immediately, returns null if not found</span>
            <span class="class-highlight">Student</span> s2 = session.get(<span class="class-highlight">Student</span>.class, 102);
            
            <span class="comment-highlight">// Check for null to avoid NullPointerException</span>
            <span class="keyword-highlight">if</span> (s2 != <span class="keyword-highlight">null</span>) {
                System.out.println(s2.getSname());
            } <span class="keyword-highlight">else</span> {
                System.out.println(<span class="string-highlight">"No student found with ID 102"</span>);
            }

            <span class="comment-highlight">// Lazy loading with byId().getReference()</span>
            <span class="comment-highlight">// getReference(): Returns a proxy, querying only when fields are accessed</span>
            <span class="class-highlight">Student</span> s3 = session.byId(<span class="class-highlight">Student</span>.class).getReference(102);
            System.out.println(s3); <span class="comment-highlight">// Query executes here due to lazy loading</span>
        } <span class="keyword-highlight">finally</span> {
            <span class="comment-highlight">// Close the SessionFactory</span>
            sf.close();
        }
    }
}
            </pre>
            <h3 class="subsection-title">Code Explanation</h3>
            <ul>
                <li class="content-line"><strong>get(Student.class, 102):</strong> Eagerly fetches the Student with rollNo=102, executing the query immediately.</li>
                <li class="content-line"><strong>null check:</strong> Prevents errors for non-existent records.</li>
                <li class="content-line"><strong>byId().getReference:</strong> Lazily loads the object, creating a proxy that queries the database only when fields are accessed.</li>
                <li class="content-line"><strong>No transaction:</strong> Fetching is read-only, so transactions are not required.</li>
                <li class="content-line"><strong>Additional Insight:</strong> Lazy loading can throw LazyInitializationException if the session is closed before accessing the proxy.</li>
            </ul>
            <h3 class="subsection-title">Database Table: student</h3>
            <table>
                <tr>
                    <th>rollNo (PK)</th>
                    <th>sName</th>
                    <th>sAge</th>
                </tr>
                <tr>
                    <td>102</td>
                    <td>Kiran</td>
                    <td>20</td>
                </tr>
            </table>
        </div>

        <div class="section" id="updating-deleting">
            <h2 class="section-title">Updating and Deleting Data</h2>
            <h3 class="subsection-title">Key Points</h3>
            <ul>
                <li class="content-line">Use session.merge() to update or insert records (replaces deprecated update(), saveOrUpdate()).</li>
                <li class="content-line">Use session.remove() to delete records (replaces deprecated delete()).</li>
                <li class="content-line">Transactions are required for both operations.</li>
                <li class="content-line">merge() performs a SELECT to check existence, then UPDATE or INSERT.</li>
                <li class="content-line">remove() performs a SELECT and DELETE.</li>
                <li class="content-line"><strong>Additional Insight:</strong> merge() copies the state of a detached object into a managed entity, ensuring persistence context synchronization.</li>
            </ul>
            <h3 class="subsection-title">Code Example: UpdateDeleteMain.java</h3>
            <pre class="code-block">
<span class="keyword-highlight">package</span> com.telusko;

<span class="keyword-highlight">import</span> org.hibernate.Session;
<span class="keyword-highlight">import</span> org.hibernate.SessionFactory;
<span class="keyword-highlight">import</span> org.hibernate.Transaction;
<span class="keyword-highlight">import</span> org.hibernate.cfg.Configuration;

<span class="keyword-highlight">public</span> <span class="keyword-highlight">class</span> <span class="class-highlight">UpdateDeleteMain</span> {
    <span class="keyword-highlight">public</span> <span class="keyword-highlight">static</span> <span class="keyword-highlight">void</span> main(String[] args) {
        <span class="comment-highlight">// Configure Hibernate and register the Student entity</span>
        SessionFactory sf = <span class="keyword-highlight">new</span> Configuration()
                .addAnnotatedClass(<span class="class-highlight">Student</span>.class)
                .configure()
                .buildSessionFactory();

        <span class="comment-highlight">// Open a session for database operations</span>
        <span class="keyword-highlight">try</span> (Session session = sf.openSession()) {
            <span class="comment-highlight">// Update example</span>
            <span class="comment-highlight">// Create a Student object with updated values</span>
            <span class="class-highlight">Student</span> s1 = <span class="keyword-highlight">new</span> <span class="class-highlight">Student</span>();
            s1.setRollNo(103);
            s1.setSname(<span class="string-highlight">"Harsh"</span>);
            s1.setSage(23);

            <span class="comment-highlight">// Begin a transaction for updating</span>
            Transaction tx = session.beginTransaction();
            <span class="comment-highlight">// merge(): Updates if the record exists, inserts if it doesn't</span>
            session.merge(s1);
            <span class="comment-highlight">// Commit the transaction to apply changes</span>
            tx.commit();

            <span class="comment-highlight">// Delete example</span>
            <span class="comment-highlight">// Fetch the Student to delete</span>
            <span class="class-highlight">Student</span> s2 = session.get(<span class="class-highlight">Student</span>.class, 109);
            <span class="keyword-highlight">if</span> (s2 != <span class="keyword-highlight">null</span>) {
                <span class="comment-highlight">// Begin a transaction for deletion</span>
                tx = session.beginTransaction();
                <span class="comment-highlight">// remove(): Deletes the Student from the database</span>
                session.remove(s2);
                <span class="comment-highlight">// Commit the transaction</span>
                tx.commit();
            } <span class="keyword-highlight">else</span> {
                System.out.println(<span class="string-highlight">"No student found with ID 109"</span>);
            }
        } <span class="keyword-highlight">finally</span> {
            <span class="comment-highlight">// Close the SessionFactory</span>
            sf.close();
        }
    }
}
            </pre>
            <h3 class="subsection-title">Code Explanation</h3>
            <ul>
                <li class="content-line"><strong>merge(s1):</strong> Updates the Student with rollNo=103 if it exists, or inserts a new record.</li>
                <li class="content-line"><strong>get(Student.class, 109):</strong> Fetches the Student for deletion.</li>
                <li class="content-line"><strong>remove(s2):</strong> Deletes the fetched Student from the database.</li>
                <li class="content-line"><strong>Transactions:</strong> Mandatory for write operations to ensure data consistency.</li>
                <li class="content-line"><strong>null check:</strong> Prevents errors for non-existent records.</li>
                <li class="content-line"><strong>Additional Insight:</strong> Use merge() for detached objects (e.g., from a web session) to reattach them to the persistence context.</li>
            </ul>
            <h3 class="subsection-title">Database Table: student (After Update)</h3>
            <table>
                <tr>
                    <th>rollNo (PK)</th>
                    <th>sName</th>
                    <th>sAge</th>
                </tr>
                <tr>
                    <td>103</td>
                    <td>Harsh</td>
                    <td>23</td>
                </tr>
            </table>
        </div>

        <div class="section" id="customizing-table-columns">
            <h2 class="section-title">Customizing Table and Column Names</h2>
            <h3 class="subsection-title">Key Points</h3>
            <ul>
                <li class="content-line">Default table name is the class name (e.g., Student â†’ student).</li>
                <li class="content-line">Use @Table(name="custom_name") to customize table names.</li>
                <li class="content-line">Use @Column(name="custom_name") to rename columns.</li>
                <li class="content-line">Use @Transient to exclude fields from persistence.</li>
                <li class="content-line"><strong>Additional Insight:</strong> Customizing names aligns Java conventions (camelCase) with database conventions (snake_case).</li>
            </ul>
            <h3 class="subsection-title">Code Example: Alien.java</h3>
            <pre class="code-block">
<span class="keyword-highlight">package</span> com.telusko;

<span class="keyword-highlight">import</span> jakarta.persistence.Column;
<span class="keyword-highlight">import</span> jakarta.persistence.Entity;
<span class="keyword-highlight">import</span> jakarta.persistence.Id;
<span class="keyword-highlight">import</span> jakarta.persistence.Table;
<span class="keyword-highlight">import</span> jakarta.persistence.Transient;

<span class="comment-highlight">// @Entity: Marks this class as a Hibernate entity</span>
<span class="comment-highlight">// @Table: Customizes the table name to alien_table</span>
<span class="annotation-highlight">@Entity</span>
<span class="annotation-highlight">@Table</span>(<span class="highlight">name</span> = <span class="string-highlight">"alien_table"</span>)
<span class="keyword-highlight">public</span> <span class="keyword-highlight">class</span> <span class="class-highlight">Alien</span> {
    <span class="comment-highlight">// @Id: Designates aid as the primary key</span>
    <span class="annotation-highlight">@Id</span>
    <span class="keyword-highlight">private</span> <span class="keyword-highlight">int</span> aid;

    <span class="comment-highlight">// @Column: Maps aname to the alien_name column in the database</span>
    <span class="annotation-highlight">@Column</span>(<span class="highlight">name</span> = <span class="string-highlight">"alien_name"</span>)
    <span class="keyword-highlight">private</span> String aname;

    <span class="comment-highlight">// @Transient: Excludes this field from being persisted in the database</span>
    <span class="annotation-highlight">@Transient</span>
    <span class="keyword-highlight">private</span> String technology;

    <span class="comment-highlight">// Getters and setters</span>
    <span class="keyword-highlight">public</span> <span class="keyword-highlight">int</span> getAid() {
        <span class="keyword-highlight">return</span> aid;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">void</span> setAid(<span class="keyword-highlight">int</span> aid) {
        <span class="keyword-highlight">this</span>.aid = aid;
    }

    <span class="keyword-highlight">public</span> String getAname() {
        <span class="keyword-highlight">return</span> aname;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">void</span> setAname(String aname) {
        <span class="keyword-highlight">this</span>.aname = aname;
    }

    <span class="keyword-highlight">public</span> String getTechnology() {
        <span class="keyword-highlight">return</span> technology;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">void</span> setTechnology(String technology) {
        <span class="keyword-highlight">this</span>.technology = technology;
    }

    <span class="comment-highlight">// toString for readable output</span>
    <span class="annotation-highlight">@Override</span>
    <span class="keyword-highlight">public</span> String toString() {
        <span class="keyword-highlight">return</span> <span class="string-highlight">"Alien{"</span> +
                <span class="string-highlight">"aid="</span> + aid +
                <span class="string-highlight">", aname='"</span> + aname + <span class="string-highlight">'\''</span> +
                <span class="string-highlight">", technology='"</span> + technology + <span class="string-highlight">'\''</span> +
                <span class="string-highlight">'}'</span>;
    }
}
            </pre>
            <h3 class="subsection-title">Annotation Explanation</h3>
            <ul>
                <li class="content-line"><strong>@Table(name="alien_table"):</strong> Overrides the default table name (Alien) to alien_table.</li>
                <li class="content-line"><strong>@Column(name="alien_name"):</strong> Maps the aname field to the alien_name column.</li>
                <li class="content-line"><strong>@Transient:</strong> Prevents the technology field from being stored in the database, useful for temporary or computed fields.</li>
            </ul>
            <h3 class="subsection-title">Code Explanation</h3>
            <ul>
                <li class="content-line">Customizes table and column names to align with database naming conventions.</li>
                <li class="content-line">Excludes technology from persistence, reducing database overhead.</li>
                <li class="content-line"><strong>Additional Insight:</strong> Use @Column attributes like length, nullable, or unique for additional constraints.</li>
            </ul>
            <h3 class="subsection-title">Database Table: alien_table</h3>
            <table>
                <tr>
                    <th>aid (PK)</th>
                    <th>alien_name</th>
                </tr>
                <tr>
                    <td>101</td>
                    <td>Navin</td>
                </tr>
            </table>
        </div>

        <div class="section" id="embedding-objects">
            <h2 class="section-title">Embedding Objects</h2>
            <h3 class="subsection-title">Key Points</h3>
            <ul>
                <li class="content-line">Use @Embeddable to embed an objectâ€™s fields into the parent entityâ€™s table.</li>
                <li class="content-line">Avoids creating a separate table for the embedded object.</li>
                <li class="content-line">Embedded fields (e.g., Laptopâ€™s brand, model, ram) become columns in the parent table.</li>
                <li class="content-line"><strong>Additional Insight:</strong> Embedding is ideal for tightly coupled data (e.g., address within a user entity) to simplify schema design.</li>
            </ul>
            <h3 class="subsection-title">Code Example: Laptop.java</h3>
            <pre class="code-block">
<span class="keyword-highlight">package</span> com.telusko;

<span class="keyword-highlight">import</span> jakarta.persistence.Embeddable;

<span class="comment-highlight">// @Embeddable: Marks this class for embedding, including its fields in the parent entity's table</span>
<span class="annotation-highlight">@Embeddable</span>
<span class="keyword-highlight">public</span> <span class="keyword-highlight">class</span> <span class="class-highlight">Laptop</span> {
    <span class="keyword-highlight">private</span> String brand;
    <span class="keyword-highlight">private</span> String model;
    <span class="keyword-highlight">private</span> <span class="keyword-highlight">int</span> ram;

    <span class="comment-highlight">// Getters and setters</span>
    <span class="keyword-highlight">public</span> String getBrand() {
        <span class="keyword-highlight">return</span> brand;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">void</span> setBrand(String brand) {
        <span class="keyword-highlight">this</span>.brand = brand;
    }

    <span class="keyword-highlight">public</span> String getModel() {
        <span class="keyword-highlight">return</span> model;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">void</span> setModel(String model) {
        <span class="keyword-highlight">this</span>.model = model;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">int</span> getRam() {
        <span class="keyword-highlight">return</span> ram;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">void</span> setRam(<span class="keyword-highlight">int</span> ram) {
        <span class="keyword-highlight">this</span>.ram = ram;
    }

    <span class="comment-highlight">// toString for readable output</span>
    <span class="annotation-highlight">@Override</span>
    <span class="keyword-highlight">public</span> String toString() {
        <span class="keyword-highlight">return</span> <span class="string-highlight">"Laptop{"</span> +
                <span class="string-highlight">"brand='"</span> + brand + <span class="string-highlight">'\''</span> +
                <span class="string-highlight">", model='"</span> + model + <span class="string-highlight">'\''</span> +
                <span class="string-highlight">", ram="</span> + ram +
                <span class="string-highlight">'}'</span>;
    }
}
            </pre>
            <h3 class="subsection-title">Code Example: AlienEmbed.java</h3>
            <pre class="code-block">
<span class="keyword-highlight">package</span> com.telusko;

<span class="keyword-highlight">import</span> jakarta.persistence.Entity;
<span class="keyword-highlight">import</span> jakarta.persistence.Id;

<span class="comment-highlight">// @Entity: Marks this class as a Hibernate entity</span>
<span class="annotation-highlight">@Entity</span>
<span class="keyword-highlight">public</span> <span class="keyword-highlight">class</span> <span class="class-highlight">AlienEmbed</span> {
    <span class="comment-highlight">// @Id: Designates aid as the primary key</span>
    <span class="annotation-highlight">@Id</span>
    <span class="keyword-highlight">private</span> <span class="keyword-highlight">int</span> aid;
    <span class="keyword-highlight">private</span> String aname;
    <span class="keyword-highlight">private</span> String technology;
    <span class="comment-highlight">// Embedded Laptop object; its fields are included in the alien_embed table</span>
    <span class="keyword-highlight">private</span> <span class="class-highlight">Laptop</span> laptop;

    <span class="comment-highlight">// Getters and setters</span>
    <span class="keyword-highlight">public</span> <span class="keyword-highlight">int</span> getAid() {
        <span class="keyword-highlight">return</span> aid;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">void</span> setAid(<span class="keyword-highlight">int</span> aid) {
        <span class="keyword-highlight">this</span>.aid = aid;
    }

    <span class="keyword-highlight">public</span> String getAname() {
        <span class="keyword-highlight">return</span> aname;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">void</span> setAname(String aname) {
        <span class="keyword-highlight">this</span>.aname = aname;
    }

    <span class="keyword-highlight">public</span> String getTechnology() {
        <span class="keyword-highlight">return</span> technology;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">void</span> setTechnology(String technology) {
        <span class="keyword-highlight">this</span>.technology = technology;
    }

    <span class="keyword-highlight">public</span> <span class="class-highlight">Laptop</span> getLaptop() {
        <span class="keyword-highlight">return</span> laptop;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">void</span> setLaptop(<span class="class-highlight">Laptop</span> laptop) {
        <span class="keyword-highlight">this</span>.laptop = laptop;
    }

    <span class="comment-highlight">// toString for readable output</span>
    <span class="annotation-highlight">@Override</span>
    <span class="keyword-highlight">public</span> String toString() {
        <span class="keyword-highlight">return</span> <span class="string-highlight">"AlienEmbed{"</span> +
                <span class="string-highlight">"aid="</span> + aid +
                <span class="string-highlight">", aname='"</span> + aname + <span class="string-highlight">'\''</span> +
                <span class="string-highlight">", technology='"</span> + technology + <span class="string-highlight">'\''</span> +
                <span class="string-highlight">", laptop="</span> + laptop +
                <span class="string-highlight">'}'</span>;
    }
}
            </pre>
            <h3 class="subsection-title">Code Example: EmbedMain.java</h3>
            <pre class="code-block">
<span class="keyword-highlight">package</span> com.telusko;

<span class="keyword-highlight">import</span> org.hibernate.Session;
<span class="keyword-highlight">import</span> org.hibernate.SessionFactory;
<span class="keyword-highlight">import</span> org.hibernate.Transaction;
<span class="keyword-highlight">import</span> org.hibernate.cfg.Configuration;

<span class="keyword-highlight">public</span> <span class="keyword-highlight">class</span> <span class="class-highlight">EmbedMain</span> {
    <span class="keyword-highlight">public</span> <span class="keyword-highlight">static</span> <span class="keyword-highlight">void</span> main(String[] args) {
        <span class="comment-highlight">// Configure Hibernate and register the AlienEmbed entity</span>
        SessionFactory sf = <span class="keyword-highlight">new</span> Configuration()
                .addAnnotatedClass(<span class="class-highlight">AlienEmbed</span>.class)
                .configure()
                .buildSessionFactory();

        <span class="comment-highlight">// Open a session for database operations</span>
        <span class="keyword-highlight">try</span> (Session session = sf.openSession()) {
            <span class="comment-highlight">// Begin a transaction for data modification</span>
            Transaction tx = session.beginTransaction();

            <span class="comment-highlight">// Create a Laptop object</span>
            <span class="class-highlight">Laptop</span> l1 = <span class="keyword-highlight">new</span> <span class="class-highlight">Laptop</span>();
            l1.setBrand(<span class="string-highlight">"Asus"</span>);
            l1.setModel(<span class="string-highlight">"ROG"</span>);
            l1.setRam(16);

            <span class="comment-highlight">// Create an AlienEmbed object with embedded Laptop</span>
            <span class="class-highlight">AlienEmbed</span> a1 = <span class="keyword-highlight">new</span> <span class="class-highlight">AlienEmbed</span>();
            a1.setAid(101);
            a1.setAname(<span class="string-highlight">"Navin"</span>);
            a1.setTechnology(<span class="string-highlight">"Java"</span>);
            a1.setLaptop(l1);

            <span class="comment-highlight">// Persist the object to the database</span>
            session.persist(a1);

            <span class="comment-highlight">// Commit the transaction to save changes</span>
            tx.commit();
        } <span class="keyword-highlight">finally</span> {
            <span class="comment-highlight">// Close the SessionFactory</span>
            sf.close();
        }
    }
}
            </pre>
            <h3 class="subsection-title">Annotation Explanation</h3>
            <ul>
                <li class="content-line"><strong>@Embeddable:</strong> Marks Laptop for embedding, flattening its fields into the parent table (alien_embed).</li>
            </ul>
            <h3 class="subsection-title">Code Explanation</h3>
            <ul>
                <li class="content-line"><strong>Embedding:</strong> Laptop fields (brand, model, ram) are included as columns in the alien_embed table.</li>
                <li class="content-line"><strong>persist(a1):</strong> Saves AlienEmbed with embedded Laptop fields in a single table.</li>
                <li class="content-line"><strong>Transaction:</strong> Required for persistence to ensure data consistency.</li>
                <li class="content-line"><strong>Additional Insight:</strong> Use @AttributeOverrides to customize embedded field names if they conflict with parent entity fields.</li>
            </ul>
            <h3 class="subsection-title">Database Table: alien_embed</h3>
            <table>
                <tr>
                    <th>aid (PK)</th>
                    <th>aname</th>
                    <th>technology</th>
                    <th>brand</th>
                    <th>model</th>
                    <th>ram</th>
                </tr>
                <tr>
                    <td>101</td>
                    <td>Navin</td>
                    <td>Java</td>
                    <td>Asus</td>
                    <td>ROG</td>
                    <td>16</td>
                </tr>
            </table>
        </div>

        <div class="section" id="mapping-relationships">
            <h2 class="section-title">Mapping Relationships</h2>
            <h3 class="subsection-title">One-to-One Mapping</h3>
            <h4 class="subsection-title">Key Points</h4>
            <ul>
                <li class="content-line">One Alien has one Laptop, implemented with @OneToOne.</li>
                <li class="content-line">Laptop is the parent table; Alien includes a foreign key (laptop_lid).</li>
                <li class="content-line">Persist the parent (Laptop) before the child (Alien).</li>
                <li class="content-line"><strong>Additional Insight:</strong> Use cascade = CascadeType.ALL on @OneToOne to propagate operations (e.g., persist, remove) to the related entity.</li>
            </ul>
            <h4 class="subsection-title">Code Example: Laptop.java</h4>
            <pre class="code-block">
<span class="keyword-highlight">package</span> com.telusko;

<span class="keyword-highlight">import</span> jakarta.persistence.Entity;
<span class="keyword-highlight">import</span> jakarta.persistence.Id;

<span class="comment-highlight">// @Entity: Marks this class as a Hibernate entity</span>
<span class="annotation-highlight">@Entity</span>
<span class="keyword-highlight">public</span> <span class="keyword-highlight">class</span> <span class="class-highlight">Laptop</span> {
    <span class="comment-highlight">// @Id: Designates lid as the primary key</span>
    <span class="annotation-highlight">@Id</span>
    <span class="keyword-highlight">private</span> <span class="keyword-highlight">int</span> lid;
    <span class="keyword-highlight">private</span> String brand;
    <span class="keyword-highlight">private</span> String model;
    <span class="keyword-highlight">private</span> <span class="keyword-highlight">int</span> ram;

    <span class="comment-highlight">// Getters and setters</span>
    <span class="keyword-highlight">public</span> <span class="keyword-highlight">int</span> getLid() {
        <span class="keyword-highlight">return</span> lid;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">void</span> setLid(<span class="keyword-highlight">int</span> lid) {
        <span class="keyword-highlight">this</span>.lid = lid;
    }

    <span class="keyword-highlight">public</span> String getBrand() {
        <span class="keyword-highlight">return</span> brand;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">void</span> setBrand(String brand) {
        <span class="keyword-highlight">this</span>.brand = brand;
    }

    <span class="keyword-highlight">public</span> String getModel() {
        <span class="keyword-highlight">return</span> model;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">void</span> setModel(String model) {
        <span class="keyword-highlight">this</span>.model = model;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">int</span> getRam() {
        <span class="keyword-highlight">return</span> ram;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">void</span> setRam(<span class="keyword-highlight">int</span> ram) {
        <span class="keyword-highlight">this</span>.ram = ram;
    }

    <span class="comment-highlight">// toString for readable output</span>
    <span class="annotation-highlight">@Override</span>
    <span class="keyword-highlight">public</span> String toString() {
        <span class="keyword-highlight">return</span> <span class="string-highlight">"Laptop{"</span> +
                <span class="string-highlight">"lid="</span> + lid +
                <span class="string-highlight">", brand='"</span> + brand + <span class="string-highlight">'\''</span> +
                <span class="string-highlight">", model='"</span> + model + <span class="string-highlight">'\''</span> +
                <span class="string-highlight">", ram="</span> + ram +
                <span class="string-highlight">'}'</span>;
    }
}
            </pre>
            <h4 class="subsection-title">Code Example: AlienOneToOne.java</h4>
            <pre class="code-block">
<span class="keyword-highlight">package</span> com.telusko;

<span class="keyword-highlight">import</span> jakarta.persistence.Entity;
<span class="keyword-highlight">import</span> jakarta.persistence.Id;
<span class="keyword-highlight">import</span> jakarta.persistence.OneToOne;

<span class="comment-highlight">// @Entity: Marks this class as a Hibernate entity</span>
<span class="annotation-highlight">@Entity</span>
<span class="keyword-highlight">public</span> <span class="keyword-highlight">class</span> <span class="class-highlight">AlienOneToOne</span> {
    <span class="comment-highlight">// @Id: Designates aid as the primary key</span>
    <span class="annotation-highlight">@Id</span>
    <span class="keyword-highlight">private</span> <span class="keyword-highlight">int</span> aid;
    <span class="keyword-highlight">private</span> String aname;
    <span class="keyword-highlight">private</span> String technology;
    <span class="comment-highlight">// @OneToOne: Defines a one-to-one relationship with Laptop, creating a foreign key (laptop_lid)</span>
    <span class="annotation-highlight">@OneToOne</span>
    <span class="keyword-highlight">private</span> <span class="class-highlight">Laptop</span> laptop;

    <span class="comment-highlight">// Getters and setters</span>
    <span class="keyword-highlight">public</span> <span class="keyword-highlight">int</span> getAid() {
        <span class="keyword-highlight">return</span> aid;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">void</span> setAid(<span class="keyword-highlight">int</span> aid) {
        <span class="keyword-highlight">this</span>.aid = aid;
    }

    <span class="keyword-highlight">public</span> String getAname() {
        <span class="keyword-highlight">return</span> aname;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">void</span> setAname(String aname) {
        <span class="keyword-highlight">this</span>.aname = aname;
    }

    <span class="keyword-highlight">public</span> String getTechnology() {
        <span class="keyword-highlight">return</span> technology;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">void</span> setTechnology(String technology) {
        <span class="keyword-highlight">this</span>.technology = technology;
    }

    <span class="keyword-highlight">public</span> <span class="class-highlight">Laptop</span> getLaptop() {
        <span class="keyword-highlight">return</span> laptop;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">void</span> setLaptop(<span class="class-highlight">Laptop</span> laptop) {
        <span class="keyword-highlight">this</span>.laptop = laptop;
    }

    <span class="comment-highlight">// toString for readable output</span>
    <span class="annotation-highlight">@Override</span>
    <span class="keyword-highlight">public</span> String toString() {
        <span class="keyword-highlight">return</span> <span class="string-highlight">"AlienOneToOne{"</span> +
                <span class="string-highlight">"aid="</span> + aid +
                <span class="string-highlight">", aname='"</span> + aname + <span class="string-highlight">'\''</span> +
                <span class="string-highlight">", technology='"</span> + technology + <span class="string-highlight">'\''</span> +
                <span class="string-highlight">", laptop="</span> + laptop +
                <span class="string-highlight">'}'</span>;
    }
}
            </pre>
            <h4 class="subsection-title">Code Example: OneToOneMain.java</h4>
            <pre class="code-block">
<span class="keyword-highlight">package</span> com.telusko;

<span class="keyword-highlight">import</span> org.hibernate.Session;
<span class="keyword-highlight">import</span> org.hibernate.SessionFactory;
<span class="keyword-highlight">import</span> org.hibernate.Transaction;
<span class="keyword-highlight">import</span> org.hibernate.cfg.Configuration;

<span class="keyword-highlight">public</span> <span class="keyword-highlight">class</span> <span class="class-highlight">OneToOneMain</span> {
    <span class="keyword-highlight">public</span> <span class="keyword-highlight">static</span> <span class="keyword-highlight">void</span> main(String[] args) {
        <span class="comment-highlight">// Configure Hibernate and register entity classes</span>
        SessionFactory sf = <span class="keyword-highlight">new</span> Configuration()
                .addAnnotatedClass(<span class="class-highlight">AlienOneToOne</span>.class)
                .addAnnotatedClass(<span class="class-highlight">Laptop</span>.class)
                .configure()
                .buildSessionFactory();

        <span class="comment-highlight">// Open a session for database operations</span>
        <span class="keyword-highlight">try</span> (Session session = sf.openSession()) {
            <span class="comment-highlight">// Begin a transaction for data modification</span>
            Transaction tx = session.beginTransaction();

            <span class="comment-highlight">// Create a Laptop object (parent entity)</span>
            <span class="class-highlight">Laptop</span> l1 = <span class="keyword-highlight">new</span> <span class="class-highlight">Laptop</span>();
            l1.setLid(1);
            l1.setBrand(<span class="string-highlight">"Asus"</span>);
            l1.setModel(<span class="string-highlight">"ROG"</span>);
            l1.setRam(16);

            <span class="comment-highlight">// Create an AlienOneToOne object with Laptop (child entity)</span>
            <span class="class-highlight">AlienOneToOne</span> a1 = <span class="keyword-highlight">new</span> <span class="class-highlight">AlienOneToOne</span>();
            a1.setAid(101);
            a1.setAname(<span class="string-highlight">"Navin"</span>);
            a1.setTechnology(<span class="string-highlight">"Java"</span>);
            a1.setLaptop(l1);

            <span class="comment-highlight">// Persist Laptop first (parent), then AlienOneToOne</span>
            session.persist(l1);
            session.persist(a1);

            <span class="comment-highlight">// Commit the transaction to save changes</span>
            tx.commit();
        } <span class="keyword-highlight">finally</span> {
            <span class="comment-highlight">// Close the SessionFactory</span>
            sf.close();
        }
    }
}
            </pre>
            <h4 class="subsection-title">Annotation Explanation</h4>
            <ul>
                <li class="content-line"><strong>@OneToOne:</strong> Establishes a one-to-one relationship, linking AlienOneToOne to Laptop via a foreign key (laptop_lid).</li>
            </ul>
            <h4 class="subsection-title">Code Explanation</h4>
            <ul>
                <li class="content-line">Persists Laptop first, then AlienOneToOne, ensuring the foreign key (laptop_lid) can be set.</li>
                <li class="content-line">The laptop_lid foreign key in alien_one_to_one links to the lid primary key in laptop.</li>
                <li class="content-line"><strong>Additional Insight:</strong> Use mappedBy in bidirectional @OneToOne relationships to avoid duplicate foreign keys.</li>
            </ul>
            <h4 class="subsection-title">Database Tables</h4>
            <h5 class="subsection-title">laptop</h5>
            <table>
                <tr>
                    <th>lid (PK)</th>
                    <th>brand</th>
                    <th>model</th>
                    <th>ram</th>
                </tr>
                <tr>
                    <td>1</td>
                    <td>Asus</td>
                    <td>ROG</td>
                    <td>16</td>
                </tr>
            </table>
            <h5 class="subsection-title">alien_one_to_one</h5>
            <table>
                <tr>
                    <th>aid (PK)</th>
                    <th>aname</th>
                    <th>technology</th>
                    <th>laptop_lid (FK)</th>
                </tr>
                <tr>
                    <td>101</td>
                    <td>Navin</td>
                    <td>Java</td>
                    <td>1</td>
                </tr>
            </table>
            <h3 class="subsection-title">One-to-Many Mapping</h3>
            <h4 class="subsection-title">Key Points</h4>
            <ul>
                <li class="content-line">One Alien has many Laptops, implemented with @OneToMany and @ManyToOne.</li>
                <li class="content-line">Laptop table includes a foreign key (alien_aid) to link to Alien.</li>
                <li class="content-line">Use a Set to store multiple Laptops, avoiding duplicates.</li>
                <li class="content-line"><strong>Additional Insight:</strong> Use cascade = CascadeType.ALL to automatically persist related Laptops when saving an Alien.</li>
            </ul>
            <h4 class="subsection-title">Code Example: Laptop.java</h4>
            <pre class="code-block">
<span class="keyword-highlight">package</span> com.telusko;

<span class="keyword-highlight">import</span> jakarta.persistence.Entity;
<span class="keyword-highlight">import</span> jakarta.persistence.Id;
<span class="keyword-highlight">import</span> jakarta.persistence.ManyToOne;

<span class="comment-highlight">// @Entity: Marks this class as a Hibernate entity</span>
<span class="annotation-highlight">@Entity</span>
<span class="keyword-highlight">public</span> <span class="keyword-highlight">class</span> <span class="class-highlight">Laptop</span> {
    <span class="comment-highlight">// @Id: Designates lid as the primary key</span>
    <span class="annotation-highlight">@Id</span>
    <span class="keyword-highlight">private</span> <span class="keyword-highlight">int</span> lid;
    <span class="keyword-highlight">private</span> String brand;
    <span class="keyword-highlight">private</span> String model;
    <span class="keyword-highlight">private</span> <span class="keyword-highlight">int</span> ram;
    <span class="comment-highlight">// @ManyToOne: Defines a many-to-one relationship with Alien, creating a foreign key (alien_aid)</span>
    <span class="annotation-highlight">@ManyToOne</span>
    <span class="keyword-highlight">private</span> <span class="class-highlight">AlienOneToMany</span> alien;

    <span class="comment-highlight">// Getters and setters</span>
    <span class="keyword-highlight">public</span> <span class="keyword-highlight">int</span> getLid() {
        <span class="keyword-highlight">return</span> lid;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">void</span> setLid(<span class="keyword-highlight">int</span> lid) {
        <span class="keyword-highlight">this</span>.lid = lid;
    }

    <span class="keyword-highlight">public</span> String getBrand() {
        <span class="keyword-highlight">return</span> brand;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">void</span> setBrand(String brand) {
        <span class="keyword-highlight">this</span>.brand = brand;
    }

    <span class="keyword-highlight">public</span> String getModel() {
        <span class="keyword-highlight">return</span> model;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">void</span> setModel(String model) {
        <span class="keyword-highlight">this</span>.model = model;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">int</span> getRam() {
        <span class="keyword-highlight">return</span> ram;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">void</span> setRam(<span class="keyword-highlight">int</span> ram) {
        <span class="keyword-highlight">this</span>.ram = ram;
    }

    <span class="keyword-highlight">public</span> <span class="class-highlight">AlienOneToMany</span> getAlien() {
        <span class="keyword-highlight">return</span> alien;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">void</span> setAlien(<span class="class-highlight">AlienOneToMany</span> alien) {
        <span class="keyword-highlight">this</span>.alien = alien;
    }

    <span class="comment-highlight">// toString for readable output</span>
    <span class="annotation-highlight">@Override</span>
    <span class="keyword-highlight">public</span> String toString() {
        <span class="keyword-highlight">return</span> <span class="string-highlight">"Laptop{"</span> +
                <span class="string-highlight">"lid="</span> + lid +
                <span class="string-highlight">", brand='"</span> + brand + <span class="string-highlight">'\''</span> +
                <span class="string-highlight">", model='"</span> + model + <span class="string-highlight">'\''</span> +
                <span class="string-highlight">", ram="</span> + ram +
                <span class="string-highlight">'}'</span>;
    }
}
            </pre>
            <h4 class="subsection-title">Code Example: AlienOneToMany.java</h4>
            <pre class="code-block">
<span class="keyword-highlight">package</span> com.telusko;

<span class="keyword-highlight">import</span> jakarta.persistence.Entity;
<span class="keyword-highlight">import</span> jakarta.persistence.Id;
<span class="keyword-highlight">import</span> jakarta.persistence.OneToMany;

<span class="keyword-highlight">import</span> java.util.HashSet;
<span class="keyword-highlight">import</span> java.util.Set;

<span class="comment-highlight">// @Entity: Marks this class as a Hibernate entity</span>
<span class="annotation-highlight">@Entity</span>
<span class="keyword-highlight">public</span> <span class="keyword-highlight">class</span> <span class="class-highlight">AlienOneToMany</span> {
    <span class="comment-highlight">// @Id: Designates aid as the primary key</span>
    <span class="annotation-highlight">@Id</span>
    <span class="keyword-highlight">private</span> <span class="keyword-highlight">int</span> aid;
    <span class="keyword-highlight">private</span> String aname;
    <span class="keyword-highlight">private</span> String technology;
    <span class="comment-highlight">// @OneToMany: Defines a one-to-many relationship with Laptop, storing them in a Set</span>
    <span class="annotation-highlight">@OneToMany</span>(<span class="highlight">mappedBy</span> = <span class="string-highlight">"alien"</span>)
    <span class="keyword-highlight">private</span> Set<<span class="class-highlight">Laptop</span>> laptops = <span class="keyword-highlight">new</span> HashSet<>();

    <span class="comment-highlight">// Getters and setters</span>
    <span class="keyword-highlight">public</span> <span class="keyword-highlight">int</span> getAid() {
        <span class="keyword-highlight">return</span> aid;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">void</span> setAid(<span class="keyword-highlight">int</span> aid) {
        <span class="keyword-highlight">this</span>.aid = aid;
    }

    <span class="keyword-highlight">public</span> String getAname() {
        <span class="keyword-highlight">return</span> aname;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">void</span> setAname(String aname) {
        <span class="keyword-highlight">this</span>.aname = aname;
    }

    <span class="keyword-highlight">public</span> String getTechnology() {
        <span class="keyword-highlight">return</span> technology;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">void</span> setTechnology(String technology) {
        <span class="keyword-highlight">this</span>.technology = technology;
    }

    <span class="keyword-highlight">public</span> Set<<span class="class-highlight">Laptop</span>> getLaptops() {
        <span class="keyword-highlight">return</span> laptops;
    }

    <span class="keyword-highlight">public</span> <span class="keyword-highlight">void</span> setLaptops(Set<<span class="class-highlight">Laptop</span>> laptops) {
        <span class="keyword-highlight">this</span>.laptops = laptops;
    }

    <span class="comment-highlight">// toString for readable output (excluding laptops to avoid recursion)</span>
    <span class="annotation-highlight">@Override</span>
    <span class="keyword-highlight">public</span> String toString() {
        <span class="keyword-highlight">return</span> <span class="string-highlight">"AlienOneToMany{"</span> +
                <span class="string-highlight">"aid="</span> + aid +
                <span class="string-highlight">", aname='"</span> + aname + <span class="string-highlight">'\''</span> +
                <span class="string-highlight">", technology='"</span> + technology + <span class="string-highlight">'\''</span> +
                <span class="string-highlight">'}'</span>;
    }
}
            </pre>
            <h4 class="subsection-title">Code Example: OneToManyMain.java</h4>
            <pre class="code-block">
<span class="keyword-highlight">package</span> com.telusko;

<span class="keyword-highlight">import</span> org.hibernate.Session;
<span class="keyword-highlight">import</span> org.hibernate.SessionFactory;
<span class="keyword-highlight">import</span> org.hibernate.Transaction;
<span class="keyword-highlight">import</span> org.hibernate.cfg.Configuration;

<span class="keyword-highlight">public</span> <span class="keyword-highlight">class</span> <span class="class-highlight">OneToManyMain</span> {
    <span class="keyword-highlight">public</span> <span class="keyword-highlight">static</span> <span class="keyword-highlight">void</span> main(String[] args) {
        <span class="comment-highlight">// Configure Hibernate and register entity classes</span>
        SessionFactory sf = <span class="keyword-highlight">new</span> Configuration()
                .addAnnotatedClass(<span class="class-highlight">AlienOneToMany</span>.class)
                .addAnnotatedClass(<span class="class-highlight">Laptop</span>.class)
                .configure()
                .buildSessionFactory();

        <span class="comment-highlight">// Open a session for database operations</span>
        <span class="keyword-highlight">try</span> (Session session = sf.openSession()) {
            <span class="comment-highlight">// Begin a transaction for data modification</span>
            Transaction tx = session.beginTransaction();

            <span class="comment-highlight">// Create an AlienOneToMany object</span>
            <span class="class-highlight">AlienOneToMany</span> a1 = <span class="keyword-highlight">new</span> <span class="class-highlight">AlienOneToMany</span>();
            a1.setAid(101);
            a1.setAname(<span class="string-highlight">"Navin"</span>);
            a1.setTechnology(<span class="string-highlight">"Java"</span>);

            <span class="comment-highlight">// Create Laptop objects</span>
            <span class="class-highlight">Laptop</span> l1 = <span class="keyword-highlight">new</span> <span class="class-highlight">Laptop</span>();
            l1.setLid(1);
            l1.setBrand(<span class="string-highlight">"Asus"</span>);
            l1.setModel(<span class="string-highlight">"ROG"</span>);
            l1.setRam(16);
            l1.setAlien(a1);

            <span class="class-highlight">Laptop</span> l2 = <span class="keyword-highlight">new</span> <span class="class-highlight">Laptop</span>();
            l2.setLid(2);
            l2.setBrand(<span class="string-highlight">"Dell"</span>);
            l2.setModel(<span class="string-highlight">"XPS"</span>);
            l2.setRam(8);
            l2.setAlien(a1);

            <span class="comment-highlight">// Add Laptops to Alien's Set</span>
            a1.getLaptops().add(l1);
            a1.getLaptops().add(l2);

            <span class="comment-highlight">// Persist the Alien (Laptops are persisted via the relationship)</span>
            session.persist(a1);

            <span class="comment-highlight">// Commit the transaction to save changes</span>
            tx.commit();
        } <span class="keyword-highlight">finally</span> {
            <span class="comment-highlight">// Close the SessionFactory</span>
            sf.close();
        }
    }
}
            </pre>
            <h4 class="subsection-title">Annotation Explanation</h4>
            <ul>
                <li class="content-line"><strong>@OneToMany(mappedBy = "alien"):</strong> Indicates AlienOneToMany has many Laptops, with the relationship managed by the alien field in Laptop.</li>
                <li class="content-line"><strong>@ManyToOne:</strong> Indicates many Laptops belong to one Alien, creating a foreign key (alien_aid) in the laptop table.</li>
            </ul>
            <h4 class="subsection-title">Code Explanation</h4>
            <ul>
                <li class="content-line">Persists AlienOneToMany, and the associated Laptops are saved due to the relationship.</li>
                <li class="content-line">The alien_aid foreign key in laptop links to the aid primary key in alien_one_to_many.</li>
                <li class="content-line"><strong>Additional Insight:</strong> Use FetchType.LAZY on @OneToMany to avoid loading all Laptops unless needed, improving performance.</li>
            </ul>
            <h4 class="subsection-title">Database Tables</h4>
            <h5 class="subsection-title">alien_one_to_many</h5>
            <table>
                <tr>
                    <th>aid (PK)</th>
                    <th>aname</th>
                    <th>technology</th>
                </tr>
                <tr>
                    <td>101</td>
                    <td>Navin</td>
                    <td>Java</td>
                </tr>
            </table>
            <h5 class="subsection-title">laptop</h5>
            <table>
                <tr>
                    <th>lid (PK)</th>
                    <th>brand</th>
                    <th>model</th>
                    <th>ram</th>
                    <th>alien_aid (FK)</th>
                </tr>
                <tr>
                    <td>1</td>
                    <td>Asus</td>
                    <td>ROG</td>
                    <td>16</td>
                    <td>101</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Dell</td>
                    <td>XPS</td>
                    <td>8</td>
                    <td>101</td>
                </tr>
            </table>
        </div>

        <div class="section" id="eager-lazy-fetching">
            <h2 class="section-title">Eager and Lazy Fetching</h2>
            <h3 class="subsection-title">Key Points</h3>
            <ul>
                <li class="content-line"><strong>Eager Fetching:</strong> Loads related data immediately (e.g., Laptops when fetching Alien).</li>
                <li class="content-line"><strong>Lazy Fetching:</strong> Loads related data only when accessed, reducing initial query overhead.</li>
                <li class="content-line">Use FetchType.EAGER or FetchType.LAZY in relationship annotations (@OneToMany, @ManyToOne).</li>
                <li class="content-line">Default: @OneToOne and @ManyToOne are EAGER, @OneToMany and @ManyToMany are LAZY.</li>
                <li class="content-line">Lazy loading can cause LazyInitializationException if the session is closed before accessing related data.</li>
                <li class="content-line"><strong>Additional Insight:</strong> Use Hibernate.initialize() to force loading of lazy relationships within a session.</li>
            </ul>
            <h3 class="subsection-title">Code Example: AlienOneToMany.java (Modified)</h3>
            <pre class="code-block">
<span class="keyword-highlight">package</span> com.telusko;

<span class="keyword-highlight">import</span> jakarta.persistence.Entity;
<span class="keyword-highlight">import</span> jakarta.persistence.Id;
<span class="keyword-highlight">import</span> jakarta.persistence.OneToMany;
<span class="keyword-highlight">import</span> jakarta.persistence.FetchType;

<span class="keyword-highlight">import</span> java.util.HashSet;
<span class="keyword-highlight">import</span> java.util.Set;

<span class="annotation-highlight">@Entity</span>
<span class="keyword-highlight">public</span> <span class="keyword-highlight">class</span> <span class="class-highlight">AlienOneToMany</span> {
    <span class="annotation-highlight">@Id</span>
    <span class="keyword-highlight">private</span> <span class="keyword-highlight">int</span> aid;
    <span class="keyword-highlight">private</span> String aname;
    <span class="keyword-highlight">private</span> String technology;
    <span class="comment-highlight">// Explicitly set to LAZY fetching (default for @OneToMany)</span>
    <span class="annotation-highlight">@OneToMany</span>(<span class="highlight">mappedBy</span> = <span class="string-highlight">"alien"</span>, <span class="highlight">fetch</span> = FetchType.LAZY)
    <span class="keyword-highlight">private</span> Set<<span class="class-highlight">Laptop</span>> laptops = <span class="keyword-highlight">new</span> HashSet<>();

    <span class="comment-highlight">// Getters, setters, and toString (as shown previously)</span>
}
            </pre>
            <h3 class="subsection-title">Code Example: FetchMain.java</h3>
            <pre class="code-block">
<span class="keyword-highlight">package</span> com.telusko;

<span class="keyword-highlight">import</span> org.hibernate.Session;
<span class="keyword-highlight">import</span> org.hibernate.SessionFactory;
<span class="keyword-highlight">import</span> org.hibernate.cfg.Configuration;

<span class="keyword-highlight">public</span> <span class="keyword-highlight">class</span> <span class="class-highlight">FetchMain</span> {
    <span class="keyword-highlight">public</span> <span class="keyword-highlight">static</span> <span class="keyword-highlight">void</span> main(String[] args) {
        SessionFactory sf = <span class="keyword-highlight">new</span> Configuration()
                .addAnnotatedClass(<span class="class-highlight">AlienOneToMany</span>.class)
                .addAnnotatedClass(<span class="class-highlight">Laptop</span>.class)
                .configure()
                .buildSessionFactory();

        <span class="keyword-highlight">try</span> (Session session = sf.openSession()) {
            <span class="comment-highlight">// Fetch AlienOneToMany with lazy-loaded Laptops</span>
            <span class="class-highlight">AlienOneToMany</span> alien = session.get(<span class="class-highlight">AlienOneToMany</span>.class, 101);
            System.out.println(alien.getAname()); <span class="comment-highlight">// Laptops not loaded yet</span>

            <span class="comment-highlight">// Access Laptops, triggering lazy loading</span>
            System.out.println(alien.getLaptops()); <span class="comment-highlight">// Query executes here</span>
        } <span class="keyword-highlight">finally</span> {
            sf.close();
        }
    }
}
            </pre>
            <h3 class="subsection-title">Code Explanation</h3>
            <ul>
                <li class="content-line"><strong>FetchType.LAZY:</strong> Laptops are not loaded when fetching AlienOneToMany, only when getLaptops() is called.</li>
                <li class="content-line">Initial query fetches only AlienOneToMany data, reducing overhead.</li>
                <li class="content-line">Accessing laptops triggers a separate query to load the related data.</li>
                <li class="content-line"><strong>Additional Insight:</strong> Use JPQL with JOIN FETCH to eagerly load relationships in a single query when needed.</li>
            </ul>
        </div>

        <div class="section" id="hibernate-caching">
            <h2 class="section-title">Hibernate Caching</h2>
            <h3 class="subsection-title">Level 1 Cache (Session Cache)</h3>
            <h4 class="subsection-title">Key Points</h4>
            <ul>
                <li class="content-line">Enabled by default, tied to the Session.</li>
                <li class="content-line">Caches objects within the same Session, reducing database queries.</li>
                <li class="content-line">Cleared when the Session is closed.</li>
                <li class="content-line">Use session.evict(object) to remove a specific object from the cache.</li>
                <li class="content-line">Use session.clear() to clear the entire cache.</li>
                <li class="content-line"><strong>Additional Insight:</strong> Level 1 cache improves performance for repeated access within a single transaction.</li>
            </ul>
            <h4 class="subsection-title">Code Example: CacheMain.java</h4>
            <pre class="code-block">
<span class="keyword-highlight">package</span> com.telusko;

<span class="keyword-highlight">import</span> org.hibernate.Session;
<span class="keyword-highlight">import</span> org.hibernate.SessionFactory;
<span class="keyword-highlight">import</span> org.hibernate.cfg.Configuration;

<span class="keyword-highlight">public</span> <span class="keyword-highlight">class</span> <span class="class-highlight">CacheMain</span> {
    <span class="keyword-highlight">public</span> <span class="keyword-highlight">static</span> <span class="keyword-highlight">void</span> main(String[] args) {
        SessionFactory sf = <span class="keyword-highlight">new</span> Configuration()
                .addAnnotatedClass(<span class="class-highlight">Student</span>.class)
                .configure()
                .buildSessionFactory();

        <span class="keyword-highlight">try</span> (Session session = sf.openSession()) {
            <span class="comment-highlight">// First get: Queries the database</span>
            <span class="class-highlight">Student</span> s1 = session.get(<span class="class-highlight">Student</span>.class, 101);
            System.out.println(s1);

            <span class="comment-highlight">// Second get: Uses Level 1 cache, no database query</span>
            <span class="class-highlight">Student</span> s2 = session.get(<span class="class-highlight">Student</span>.class, 101);
            System.out.println(s2);

            <span class="comment-highlight">// Evict s1 from cache</span>
            session.evict(s1);

            <span class="comment-highlight">// Third get: Queries the database again</span>
            <span class="class-highlight">Student</span> s3 = session.get(<span class="class-highlight">Student</span>.class, 101);
            System.out.println(s3);
        } <span class="keyword-highlight">finally</span> {
            sf.close();
        }
    }
}
            </pre>
            <h4 class="subsection-title">Code Explanation</h4>
            <ul>
                <li class="content-line">First get() queries the database and caches the Student object.</li>
                <li class="content-line">Second get() retrieves the object from the Level 1 cache, avoiding a database query.</li>
                <li class="content-line">evict(s1) removes the object from the cache, so the third get() queries the database again.</li>
                <li class="content-line"><strong>Additional Insight:</strong> Level 1 cache is not shared across sessions, limiting its scope to a single transaction or request.</li>
            </ul>
        </div>

        <div class="section" id="hibernate-query-language">
            <h2 class="section-title">Hibernate Query Language (HQL)</h2>
            <h3 class="subsection-title">Key Points</h3>
            <ul>
                <li class="content-line">HQL is similar to SQL but operates on entity objects and their properties, not database tables.</li>
                <li class="content-line">Use createQuery() to write HQL queries, mapping results to entity classes.</li>
                <li class="content-line">Supports SELECT, UPDATE, DELETE, and JOIN operations.</li>
                <li class="content-line">HQL is database-agnostic, relying on Hibernateâ€™s dialect to generate SQL.</li>
                <li class="content-line"><strong>Additional Insight:</strong> Use named queries (@NamedQuery) for reusable HQL queries, improving maintainability.</li>
            </ul>
            <h3 class="subsection-title">Code Example: HQLMain.java</h3>
            <pre class="code-block">
<span class="keyword-highlight">package</span> com.telusko;

<span class="keyword-highlight">import</span> org.hibernate.Session;
<span class="keyword-highlight">import</span> org.hibernate.SessionFactory;
<span class="keyword-highlight">import</span> org.hibernate.cfg.Configuration;
<span class="keyword-highlight">import</span> org.hibernate.query.Query;

<span class="keyword-highlight">import</span> java.util.List;

<span class="keyword-highlight">public</span> <span class="keyword-highlight">class</span> <span class="class-highlight">HQLMain</span> {
    <span class="keyword-highlight">public</span> <span class="keyword-highlight">static</span> <span class="keyword-highlight">void</span> main(String[] args) {
        SessionFactory sf = <span class="keyword-highlight">new</span> Configuration()
                .addAnnotatedClass(<span class="class-highlight">Student</span>.class)
                .configure()
                .buildSessionFactory();

        <span class="keyword-highlight">try</span> (Session session = sf.openSession()) {
            <span class="comment-highlight">// HQL query to select all Students</span>
            String hql = <span class="string-highlight">"FROM Student"</span>;
            Query<<span class="class-highlight">Student</span>> query = session.createQuery(hql, <span class="class-highlight">Student</span>.class);
            List<<span class="class-highlight">Student</span>> students = query.list();
            System.out.println(students);

            <span class="comment-highlight">// HQL query with a WHERE clause</span>
            hql = <span class="string-highlight">"FROM Student WHERE sAge > :age"</span>;
            query = session.createQuery(hql, <span class="class-highlight">Student</span>.class);
            query.setParameter(<span class="string-highlight">"age"</span>, 20);
            students = query.list();
            System.out.println(students);

            <span class="comment-highlight">// HQL query to select specific fields</span>
            hql = <span class="string-highlight">"SELECT sName FROM Student WHERE rollNo = :id"</span>;
            Query<String> nameQuery = session.createQuery(hql, String.class);
            nameQuery.setParameter(<span class="string-highlight">"id"</span>, 101);
            String name = nameQuery.uniqueResult();
            System.out.println(<span class="string-highlight">"Name: "</span> + name);
        } <span class="keyword-highlight">finally</span> {
            sf.close();
        }
    }
}
            </pre>
            <h3 class="subsection-title">Code Explanation</h3>
            <ul>
                <li class="content-line"><strong>FROM Student:</strong> Selects all Student entities, translated to SQL by Hibernate.</li>
                <li class="content-line"><strong>WHERE sAge > :age:</strong> Filters Students by age, using a named parameter (:age).</li>
                <li class="content-line"><strong>SELECT sName:</strong> Retrieves only the sName field for a specific rollNo, returning a String.</li>
                <li class="content-line"><strong>Additional Insight:</strong> Use HQLâ€™s JOIN to fetch related entities, e.g., FROM AlienOneToMany a JOIN a.laptops.</li>
            </ul>
        </div>

        <div class="section" id="fetching-with-filters">
            <h2 class="section-title">Fetching with Filters</h2>
            <h3 class="subsection-title">Key Points</h3>
            <ul>
                <li class="content-line">Use @Filter and @FilterDef to apply conditional filters to entities or collections.</li>
                <li class="content-line">Filters are applied at runtime using session.enableFilter().</li>
                <li class="content-line">Useful for soft deletes or tenant-based data separation.</li>
                <li class="content-line"><strong>Additional Insight:</strong> Filters are global and reusable across multiple queries, unlike WHERE clauses in HQL.</li>
            </ul>
            <h3 class="subsection-title">Code Example: Student.java (Modified)</h3>
            <pre class="code-block">
<span class="keyword-highlight">package</span> com.telusko;

<span class="keyword-highlight">import</span> jakarta.persistence.Entity;
<span class="keyword-highlight">import</span> jakarta.persistence.Id;
<span class="keyword-highlight">import</span> org.hibernate.annotations.Filter;
<span class="keyword-highlight">import</span> org.hibernate.annotations.FilterDef;
<span class="keyword-highlight">import</span> org.hibernate.annotations.ParamDef;

<span class="comment-highlight">// @FilterDef: Defines a filter with a parameter</span>
<span class="annotation-highlight">@FilterDef</span>(<span class="highlight">name</span> = <span class="string-highlight">"ageFilter"</span>, <span class="highlight">parameters</span> = @ParamDef(<span class="highlight">name</span> = <span class="string-highlight">"minAge"</span>, <span class="highlight">type</span> = <span class="string-highlight">"integer"</span>))
<span class="comment-highlight">// @Filter: Applies the filter to the entity</span>
<span class="annotation-highlight">@Filter</span>(<span class="highlight">name</span> = <span class="string-highlight">"ageFilter"</span>, <span class="highlight">condition</span> = <span class="string-highlight">"sAge >= :minAge"</span>)
<span class="annotation-highlight">@Entity</span>
<span class="keyword-highlight">public</span> <span class="keyword-highlight">class</span> <span class="class-highlight">Student</span> {
    <span class="annotation-highlight">@Id</span>
    <span class="keyword-highlight">private</span> <span class="keyword-highlight">int</span> rollNo;
    <span class="keyword-highlight">private</span> String sName;
    <span class="keyword-highlight">private</span> <span class="keyword-highlight">int</span> sAge;

    <span class="comment-highlight">// Getters, setters, and toString (as shown previously)</span>
}
            </pre>
            <h3 class="subsection-title">Code Example: FilterMain.java</h3>
            <pre class="code-block">
<span class="keyword-highlight">package</span> com.telusko;

<span class="keyword-highlight">import</span> org.hibernate.Session;
<span class="keyword-highlight">import</span> org.hibernate.SessionFactory;
<span class="keyword-highlight">import</span> org.hibernate.cfg.Configuration;

<span class="keyword-highlight">public</span> <span class="keyword-highlight">class</span> <span class="class-highlight">FilterMain</span> {
    <span class="keyword-highlight">public</span> <span class="keyword-highlight">static</span> <span class="keyword-highlight">void</span> main(String[] args) {
        SessionFactory sf = <span class="keyword-highlight">new</span> Configuration()
                .addAnnotatedClass(<span class="class-highlight">Student</span>.class)
                .configure()
                .buildSessionFactory();

        <span class="keyword-highlight">try</span> (Session session = sf.openSession()) {
            <span class="comment-highlight">// Enable the filter and set the parameter</span>
            session.enableFilter(<span class="string-highlight">"ageFilter"</span>).setParameter(<span class="string-highlight">"minAge"</span>, 20);

            <span class="comment-highlight">// Fetch Students; filter is applied automatically</span>
            <span class="class-highlight">Student</span> student = session.get(<span class="class-highlight">Student</span>.class, 101);
            System.out.println(student);

            <span class="comment-highlight">// Disable the filter</span>
            session.disableFilter(<span class="string-highlight">"ageFilter"</span>);

            <span class="comment-highlight">// Fetch again; filter is not applied</span>
            student = session.get(<span class="class-highlight">Student</span>.class, 101);
            System.out.println(student);
        } <span class="keyword-highlight">finally</span> {
            sf.close();
        }
    }
}
            </pre>
            <h3 class="subsection-title">Code Explanation</h3>
            <ul>
                <li class="content-line"><strong>@FilterDef and @Filter:</strong> Define and apply a filter to only fetch Students where sAge >= 20.</li>
                <li class="content-line"><strong>enableFilter():</strong> Activates the filter for the session, applying it to all queries.</li>
                <li class="content-line"><strong>disableFilter():</strong> Removes the filter, so subsequent queries fetch all data.</li>
                <li class="content-line"><strong>Additional Insight:</strong> Filters can be applied to collections (e.g., @OneToMany) to filter related entities dynamically.</li>
            </ul>
        </div>

        <div class="section" id="get-vs-load">
            <h2 class="section-title">Get vs. Load</h2>
            <h3 class="subsection-title">Key Points</h3>
            <ul>
                <li class="content-line"><strong>get():</strong> Eagerly fetches the entity, returning null if not found.</li>
                <li class="content-line"><strong>load() (Deprecated):</strong> Lazily fetches the entity, returning a proxy; throws ObjectNotFoundException if not found.</li>
                <li class="content-line">Modern alternative: Use byId().getReference() for lazy loading.</li>
                <li class="content-line">get() hits the database immediately; load()/getReference() delays the query until the object is accessed.</li>
                <li class="content-line"><strong>Additional Insight:</strong> Use get() for immediate data needs; use getReference() for relationships where data access might not occur.</li>
            </ul>
            <h3 class="subsection-title">Code Example: GetVsLoadMain.java</h3>
            <pre class="code-block">
<span class="keyword-highlight">package</span> com.telusko;

<span class="keyword-highlight">import</span> org.hibernate.Session;
<span class="keyword-highlight">import</span> org.hibernate.SessionFactory;
<span class="keyword-highlight">import</span> org.hibernate.cfg.Configuration;

<span class="keyword-highlight">public</span> <span class="keyword-highlight">class</span> <span class="class-highlight">GetVsLoadMain</span> {
    <span class="keyword-highlight">public</span> <span class="keyword-highlight">static</span> <span class="keyword-highlight">void</span> main(String[] args) {
        SessionFactory sf = <span class="keyword-highlight">new</span> Configuration()
                .addAnnotatedClass(<span class="class-highlight">Student</span>.class)
                .configure()
                .buildSessionFactory();

        <span class="keyword-highlight">try</span> (Session session = sf.openSession()) {
            <span class="comment-highlight">// get(): Eager loading, hits database immediately</span>
            <span class="class-highlight">Student</span> s1 = session.get(<span class="class-highlight">Student</span>.class, 101);
            System.out.println(s1); <span class="comment-highlight">// Query executed</span>

            <span class="comment-highlight">// getReference(): Lazy loading, returns a proxy</span>
            <span class="class-highlight">Student</span> s2 = session.byId(<span class="class-highlight">Student</span>.class).getReference(101);
            System.out.println(s2.getRollNo()); <span class="comment-highlight">// Query executed here</span>
        } <span class="keyword-highlight">finally</span> {
            sf.close();
        }
    }
}
            </pre>
            <h3 class="subsection-title">Code Explanation</h3>
            <ul>
                <li class="content-line"><strong>get():</strong> Immediately queries the database, fetching the full Student object.</li>
                <li class="content-line"><strong>getReference():</strong> Returns a proxy, querying only when a non-ID field is accessed (e.g., getRollNo()).</li>
                <li class="content-line"><strong>Additional Insight:</strong> getReference() can throw LazyInitializationException if the session is closed before accessing the proxy.</li>
            </ul>
        </div>

        <div class="section" id="level-2-cache">
            <h2 class="section-title">Level 2 Cache</h2>
            <h3 class="subsection-title">Key Points</h3>
            <ul>
                <li class="content-line">Shared across sessions, enabled via a caching provider (e.g., EHCache).</li>
                <li class="content-line">Requires additional dependencies and configuration in hibernate.cfg.xml.</li>
                <li class="content-line">Use @Cacheable and @Cache on entities to enable caching.</li>
                <li class="content-line">Improves performance for frequently accessed, rarely modified data.</li>
                <li class="content-line">Cache strategies: READ_ONLY, READ_WRITE, NONSTRICT_READ_WRITE, TRANSACTIONAL.</li>
                <li class="content-line"><strong>Additional Insight:</strong> Level 2 cache is best for read-heavy applications; avoid for data with frequent updates to prevent stale data.</li>
            </ul>
            <h3 class="subsection-title">Configuration: hibernate.cfg.xml (Modified)</h3>
            <pre class="code-block">
<span class="keyword-highlight"><?xml</span> <span class="highlight">version</span>=<span class="string-highlight">'1.0'</span> <span class="highlight">encoding</span>=<span class="string-highlight">'utf-8'</span><span class="keyword-highlight">?></span>
<span class="keyword-highlight"><!DOCTYPE</span> hibernate-configuration <span class="highlight">PUBLIC</span>
        <span class="string-highlight">"-//Hibernate/Hibernate Configuration DTD//EN"</span>
        <span class="string-highlight">"http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd"</span><span class="keyword-highlight">></span>
<span class="keyword-highlight"><hibernate-configuration></span>
    <span class="keyword-highlight"><session-factory></span>
        <span class="comment-highlight"><!-- Existing database properties --></span>
        <span class="keyword-highlight"><property</span> <span class="highlight">name</span>=<span class="string-highlight">"hibernate.connection.driver_class"</span><span class="keyword-highlight">></span>org.postgresql.Driver<span class="keyword-highlight"></property></span>
        <span class="keyword-highlight"><property</span> <span class="highlight">name</span>=<span class="string-highlight">"hibernate.connection.url"</span><span class="keyword-highlight">></span>jdbc:postgresql://localhost:5432/telusko<span class="keyword-highlight"></property></span>
        <span class="keyword-highlight"><property</span> <span class="highlight">name</span>=<span class="string-highlight">"hibernate.connection.username"</span><span class="keyword-highlight">></span>postgres<span class="keyword-highlight"></property></span>
        <span class="keyword-highlight"><property</span> <span class="highlight">name</span>=<span class="string-highlight">"hibernate.connection.password"</span><span class="keyword-highlight">></span><span class="keyword-highlight"></property></span>
        <span class="keyword-highlight"><property</span> <span class="highlight">name</span>=<span class="string-highlight">"hibernate.dialect"</span><span class="keyword-highlight">></span>org.hibernate.dialect.PostgreSQLDialect<span class="keyword-highlight"></property></span>
        <span class="keyword-highlight"><property</span> <span class="highlight">name</span>=<span class="string-highlight">"hibernate.show_sql"</span><span class="keyword-highlight">></span>true<span class="keyword-highlight"></property></span>
        <span class="keyword-highlight"><property</span> <span class="highlight">name</span>=<span class="string-highlight">"hibernate.format_sql"</span><span class="keyword-highlight">></span>true<span class="keyword-highlight"></property></span>
        <span class="keyword-highlight"><property</span> <span class="highlight">name</span>=<span class="string-highlight">"hibernate.hbm2ddl.auto"</span><span class="keyword-highlight">></span>update<span class="keyword-highlight"></property></span>

        <span class="comment-highlight"><!-- Level 2 Cache Configuration --></span>
        <span class="keyword-highlight"><property</span> <span class="highlight">name</span>=<span class="string-highlight">"hibernate.cache.use_second_level_cache"</span><span class="keyword-highlight">></span>true<span class="keyword-highlight"></property></span>
        <span class="keyword-highlight"><property</span> <span class="highlight">name</span>=<span class="string-highlight">"hibernate.cache.region.factory_class"</span><span class="keyword-highlight">></span>org.hibernate.cache.ehcache.internal.EhcacheRegionFactory<span class="keyword-highlight"></property></span>
        <span class="keyword-highlight"><property</span> <span class="highlight">name</span>=<span class="string-highlight">"hibernate.cache.use_query_cache"</span><span class="keyword-highlight">></span>true<span class="keyword-highlight"></property></span>
    <span class="keyword-highlight"></session-factory></span>
<span class="keyword-highlight"></hibernate-configuration></span>
            </pre>
            <h3 class="subsection-title">Code Example: Student.java (Modified)</h3>
            <pre class="code-block">
<span class="keyword-highlight">package</span> com.telusko;

<span class="keyword-highlight">import</span> jakarta.persistence.Entity;
<span class="keyword-highlight">import</span> jakarta.persistence.Id;
<span class="keyword-highlight">import</span> jakarta.persistence.Cacheable;
<span class="keyword-highlight">import</span> org.hibernate.annotations.Cache;
<span class="keyword-highlight">import</span> org.hibernate.annotations.CacheConcurrencyStrategy;

<span class="annotation-highlight">@Entity</span>
<span class="comment-highlight">// @Cacheable: Marks the entity for Level 2 caching</span>
<span class="annotation-highlight">@Cacheable</span>
<span class="comment-highlight">// @Cache: Specifies the caching strategy (READ_WRITE for concurrent access)</span>
<span class="annotation-highlight">@Cache</span>(<span class="highlight">usage</span> = CacheConcurrencyStrategy.READ_WRITE)
<span class="keyword-highlight">public</span> <span class="keyword-highlight">class</span> <span class="class-highlight">Student</span> {
    <span class="annotation-highlight">@Id</span>
    <span class="keyword-highlight">private</span> <span class="keyword-highlight">int</span> rollNo;
    <span class="keyword-highlight">private</span> String sName;
    <span class="keyword-highlight">private</span> <span class="keyword-highlight">int</span> sAge;

    <span class="comment-highlight">// Getters, setters, and toString (as shown previously)</span>
}
            </pre>
            <h3 class="subsection-title">Code Explanation</h3>
            <ul>
                <li class="content-line"><strong>hibernate.cache.use_second_level_cache:</strong> Enables Level 2 caching.</li>
                <li class="content-line"><strong>hibernate.cache.region.factory_class:</strong> Specifies EHCache as the caching provider.</li>
                <li class="content-line"><strong>@Cacheable and @Cache:</strong> Enables caching for the Student entity with a READ_WRITE strategy.</li>
                <li class="content-line"><strong>Additional Insight:</strong> Use query.setCacheable(true) to cache HQL query results in the Level 2 cache.</li>
            </ul>
        </div>

        <div class="section" id="chat-client-example">
            <h2 class="section-title">Chat Client Example</h2>
            <h3 class="subsection-title">Key Points</h3>
            <ul>
                <li class="content-line">Demonstrates a REST API endpoint for interacting with a chat client.</li>
                <li class="content-line">Handles message sending and retrieves responses with metadata.</li>
                <li class="content-line">Uses Spring annotations for request mapping and response handling.</li>
                <li class="content-line"><strong>Additional Insight:</strong> This example can be integrated with Hibernate to persist chat messages in a database.</li>
            </ul>
            <h3 class="subsection-title">Code Example: ChatClientController.java</h3>
            <pre class="code-block">
<span class="keyword-highlight">package</span> com.example.chat;

<span class="keyword-highlight">import</span> org.slf4j.Logger;
<span class="keyword-highlight">import</span> org.slf4j.LoggerFactory;
<span class="keyword-highlight">import</span> org.springframework.http.HttpStatus;
<span class="keyword-highlight">import</span> org.springframework.http.ResponseEntity;
<span class="keyword-highlight">import</span> org.springframework.web.bind.annotation.GetMapping;
<span class="keyword-highlight">import</span> org.springframework.web.bind.annotation.RequestMapping;
<span class="keyword-highlight">import</span> org.springframework.web.bind.annotation.RequestParam;
<span class="keyword-highlight">import</span> org.springframework.web.bind.annotation.RestController;

<span class="comment-highlight">// @RestController: Marks this class as a REST controller, handling HTTP requests</span>
<span class="annotation-highlight">@RestController</span>
<span class="comment-highlight">// @RequestMapping: Maps all endpoints in this controller to /api</span>
<span class="annotation-highlight">@RequestMapping</span>(<span class="string-highlight">"/api"</span>)
<span class="keyword-highlight">public</span> <span class="keyword-highlight">class</span> <span class="class-highlight">ChatClientController</span> {

    <span class="keyword-highlight">private</span> <span class="keyword-highlight">static</span> <span class="keyword-highlight">final</span> Logger logger = LoggerFactory.getLogger(<span class="class-highlight">ChatClientController</span>.class);

    <span class="keyword-highlight">private</span> <span class="keyword-highlight">final</span> <span class="class-highlight">ChatClientService</span> chatClientService;

    <span class="comment-highlight">// Constructor injection for ChatClientService</span>
    <span class="keyword-highlight">public</span> ChatClientController(<span class="class-highlight">ChatClientService</span> chatClientService) {
        <span class="keyword-highlight">this</span>.chatClientService = chatClientService;
    }

    <span class="comment-highlight">// @GetMapping: Maps GET requests to /api/chat</span>
    <span class="annotation-highlight">@GetMapping</span>(<span class="string-highlight">"/chat"</span>)
    <span class="keyword-highlight">public</span> ResponseEntity<<span class="class-highlight">ChatResponse</span>> chatWithClient(
            <span class="comment-highlight">// @RequestParam: Extracts the "message" query parameter</span>
            <span class="annotation-highlight">@RequestParam</span>(<span class="string-highlight">"message"</span>) String message) {
        
        <span class="keyword-highlight">try</span> {
            logger.info(<span class="string-highlight">"Received chat request with message: {}"</span>, message);

            <span class="comment-highlight">// Call the service to process the chat message</span>
            <span class="class-highlight">ChatResponse</span> response = chatClientService.sendMessage(message);

            <span class="comment-highlight">// Check if the response is null or empty</span>
            <span class="keyword-highlight">if</span> (response == <span class="keyword-highlight">null</span> || response.getReply() == <span class="keyword-highlight">null</span>) {
                logger.warn(<span class="string-highlight">"Chat response is empty for message: {}"</span>, message);
                <span class="keyword-highlight">return</span> <span class="keyword-highlight">new</span> ResponseEntity<<span class="class-highlight">ChatResponse</span>>(
                        <span class="keyword-highlight">new</span> <span class="class-highlight">ChatResponse</span>(<span class="string-highlight">"No response from chat client"</span>, <span class="keyword-highlight">null</span>),
                        HttpStatus.INTERNAL_SERVER_ERROR);
            }

            logger.info(<span class="string-highlight">"Chat response: {}"</span>, response.getReply());
            <span class="keyword-highlight">return</span> <span class="keyword-highlight">new</span> ResponseEntity<>(response, HttpStatus.OK);

        } <span class="keyword-highlight">catch</span> (Exception e) {
            logger.error(<span class="string-highlight">"Error processing chat request: {}"</span>, e.getMessage());
            <span class="keyword-highlight">return</span> <span class="keyword-highlight">new</span> ResponseEntity<<span class="class-highlight">ChatResponse</span>>(
                    <span class="keyword-highlight">new</span> <span class="class-highlight">ChatResponse</span>(<span class="string-highlight">"Error processing request"</span>, <span class="keyword-highlight">null</span>),
                    HttpStatus.INTERNAL_SERVER_ERROR);
        }
    }
}
            </pre>
            <h3 class="subsection-title">Code Explanation</h3>
            <ul>
                <li class="content-line"><strong>chatClientService.sendMessage(message):</strong> Sends the userâ€™s message to the chat client and retrieves a response, potentially with metadata.</li>
                <li class="content-line"><strong>ResponseEntity:</strong> Wraps the chat response and HTTP status, enabling structured API responses (e.g., 200 OK, 500 Internal Server Error).</li>
                <li class="content-line"><strong>logger:</strong> Logs request details, responses, and errors for debugging and monitoring, using SLF4Jâ€™s logging framework.</li>
                <li class="content-line"><strong>Exception Handling:</strong> Catches and logs any errors during processing, returning a 500 status with an error message to the client.</li>
            </ul>
        </div>
    </div>
</body>
</html>